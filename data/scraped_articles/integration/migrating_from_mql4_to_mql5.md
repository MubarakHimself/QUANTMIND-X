---
title: Migrating from MQL4 to MQL5
url: https://www.mql5.com/en/articles/81
categories: Integration
relevance_score: 3
scraped_at: 2026-01-23T21:22:16.612503
---

[![](https://www.mql5.com/ff/sh/bhdtjfb1zry09943z2/267b575d2182c180804d340af38ce02c.jpg)\\
Trade from your iPhone or Android device\\
\\
You only need an internet connection to use the new powerful MetaTrader 5 Web terminal\\
\\
Learn more](https://www.mql5.com/ff/go?link=https://trade.metatrader5.com/&a=wtigumvtenarnsocpyfoqnanxrilnbxx&s=ec8c539e52b83881ff2d16eaff6913b25803952eb277cac55f670a102b2edc1f&uid=&ref=https://www.mql5.com/en/articles/81&id=bfogggabsofabcpxuzmgaibarmaxasdrj&fz_uniq=5071782281531567702)

MetaTrader 5 / Examples


### Introduction

Many developers have accumulated a lot of indicators and trading strategies written in MQL4. To use them in Metatrader 5, they should be converted to MQL5. It's not so easy to rewrite all programs in MQL5. It would be much easier to convert them, if there were a translation-reference, and better with examples.

In this article I would like to suggest my version of a guide to migrate from MQL4 to MQL5.

### 1\. Chart Periods

In MQL5 chart period constants changed, and some new time periods (M2, M3, M4, M6, M10, M12, H2, H3, H6, H8, H12) were added. To convert MQL4 time periods you can use the following function:

```
ENUM_TIMEFRAMES TFMigrate(int tf)
  {
   switch(tf)
     {
      case 0: return(PERIOD_CURRENT);
      case 1: return(PERIOD_M1);
      case 5: return(PERIOD_M5);
      case 15: return(PERIOD_M15);
      case 30: return(PERIOD_M30);
      case 60: return(PERIOD_H1);
      case 240: return(PERIOD_H4);
      case 1440: return(PERIOD_D1);
      case 10080: return(PERIOD_W1);
      case 43200: return(PERIOD_MN1);

      case 2: return(PERIOD_M2);
      case 3: return(PERIOD_M3);
      case 4: return(PERIOD_M4);
      case 6: return(PERIOD_M6);
      case 10: return(PERIOD_M10);
      case 12: return(PERIOD_M12);
      case 16385: return(PERIOD_H1);
      case 16386: return(PERIOD_H2);
      case 16387: return(PERIOD_H3);
      case 16388: return(PERIOD_H4);
      case 16390: return(PERIOD_H6);
      case 16392: return(PERIOD_H8);
      case 16396: return(PERIOD_H12);
      case 16408: return(PERIOD_D1);
      case 32769: return(PERIOD_W1);
      case 49153: return(PERIOD_MN1);
      default: return(PERIOD_CURRENT);
     }
  }
```

It should be noted, that **in MQL5 the numerical values of chart timeframe constants (from H1) are not equal to the number of minutes of a bar**(for example, in MQL5, the numerical value of constant  PERIOD\_H1=16385, but in MQL4 PERIOD\_H1=60). You should take it into account when converting to MQL5, if numerical values of MQL4 constants are used in MQL4 programs.

To determine the number of minutes of the specified time period of the chart, divide the value, returned by function [PeriodSeconds](https://www.mql5.com/en/docs/common/periodseconds) by 60.

### 2\. Declaring Contants

Some of standard MQL4 constants are absent in MQL5, therefore they should be declared:

```
//+------------------------------------------------------------------+
//|                                                     InitMQL4.mqh |
//|                                                 Copyright DC2008 |
//|                                              https://www.mql5.com |
//+------------------------------------------------------------------+
#property copyright "keiji"
#property copyright "DC2008"
#property link      "https://www.mql5.com"
//--- Declaration of constants
#define OP_BUY 0           //Buy
#define OP_SELL 1          //Sell
#define OP_BUYLIMIT 2      //Pending order of BUY LIMIT type
#define OP_SELLLIMIT 3     //Pending order of SELL LIMIT type
#define OP_BUYSTOP 4       //Pending order of BUY STOP type
#define OP_SELLSTOP 5      //Pending order of SELL STOP type
//---
#define MODE_OPEN 0
#define MODE_CLOSE 3
#define MODE_VOLUME 4
#define MODE_REAL_VOLUME 5
#define MODE_TRADES 0
#define MODE_HISTORY 1
#define SELECT_BY_POS 0
#define SELECT_BY_TICKET 1
//---
#define DOUBLE_VALUE 0
#define FLOAT_VALUE 1
#define LONG_VALUE INT_VALUE
//---
#define CHART_BAR 0
#define CHART_CANDLE 1
//---
#define MODE_ASCEND 0
#define MODE_DESCEND 1
//---
#define MODE_LOW 1
#define MODE_HIGH 2
#define MODE_TIME 5
#define MODE_BID 9
#define MODE_ASK 10
#define MODE_POINT 11
#define MODE_DIGITS 12
#define MODE_SPREAD 13
#define MODE_STOPLEVEL 14
#define MODE_LOTSIZE 15
#define MODE_TICKVALUE 16
#define MODE_TICKSIZE 17
#define MODE_SWAPLONG 18
#define MODE_SWAPSHORT 19
#define MODE_STARTING 20
#define MODE_EXPIRATION 21
#define MODE_TRADEALLOWED 22
#define MODE_MINLOT 23
#define MODE_LOTSTEP 24
#define MODE_MAXLOT 25
#define MODE_SWAPTYPE 26
#define MODE_PROFITCALCMODE 27
#define MODE_MARGINCALCMODE 28
#define MODE_MARGININIT 29
#define MODE_MARGINMAINTENANCE 30
#define MODE_MARGINHEDGED 31
#define MODE_MARGINREQUIRED 32
#define MODE_FREEZELEVEL 33
//---
#define EMPTY -1
```

Note: Constants in MQl4 and MQL5 differ, therefore it's better to declare them in a separate file initMQ4.mqh for futher use.

### 3\. Predefined Variables

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>double Ask<br>``` | ```<br>MqlTick last_tick;<br>SymbolInfoTick(_Symbol,last_tick);<br>double Ask=last_tick.ask;<br>``` | [Ask](https://docs.mql4.com/predefined/ask "https://docs.mql4.com/predefined/ask")<br>The latest known ask price for the current symbol.<br>[SymbolInfoTick](https://www.mql5.com/en/docs/marketinformation/symbolinfotick) |
| ```<br>int Bars<br>``` | ```<br>int Bars=Bars(_Symbol,_Period);<br>``` | [Bars](https://docs.mql4.com/predefined/bars "https://docs.mql4.com/predefined/bars")<br> Number of bars in the current chart.<br>[Bars](https://www.mql5.com/en/docs/series/bars) |
| ```<br>double Bid<br>``` | ```<br>MqlTick last_tick;<br>SymbolInfoTick(_Symbol,last_tick);<br>double Bid=last_tick.bid;<br>``` | [Bid](https://docs.mql4.com/predefined/bid "https://docs.mql4.com/predefined/bid")<br>The latest known bid price of the current symbol.<br>[SymbolInfoTick](https://www.mql5.com/en/docs/marketinformation/symbolinfotick) |
| ```<br>double Close[]<br>``` | ```<br>double Close[];<br>int count;   // number of elements to copy<br>ArraySetAsSeries(Close,true);<br>CopyClose(_Symbol,_Period,0,count,Close);<br>``` | [Close](https://docs.mql4.com/predefined/close "https://docs.mql4.com/predefined/close")<br> Series array that contains close prices for each bar of the current chart.<br>[CopyClose](https://www.mql5.com/en/docs/series/copyclose), [ArraySetAsSeries](https://www.mql5.com/en/docs/array/arraysetasseries) |
| ```<br>int Digits<br>``` | ```<br>int Digits=_Digits;<br>``` | [Digits](https://docs.mql4.com/predefined/digitsvar "https://docs.mql4.com/predefined/digitsvar")<br> Number of digits after the decimal point for the current symbol prices.<br>[\_Digits](https://www.mql5.com/en/docs/check/digits) |
| ```<br>double High[]<br>``` | ```<br>double High[];<br>int count;   // number of elements to copy<br>ArraySetAsSeries(High,true);<br>CopyHigh(_Symbol,_Period,0,count,High);<br>``` | [High](https://docs.mql4.com/predefined/high "https://docs.mql4.com/predefined/high")<br> Series array that contains the highest prices of each bar of the current chart.<br>[CopyHigh](https://www.mql5.com/en/docs/series/copyhigh), [ArraySetAsSerie](https://www.mql5.com/en/docs/array/arraysetasseries) [s](https://www.mql5.com/en/docs/array/arraysetasseries) |
| ```<br>double Low[]<br>``` | ```<br>double Low[];<br>int count;   // number of elements to copy<br>ArraySetAsSeries(Low,true);<br>CopyLow(_Symbol,_Period,0,count,Low);<br>``` | [Low](https://docs.mql4.com/predefined/low "https://docs.mql4.com/predefined/low")<br> Series array that contains the lowest prices of each bar of the current chart.<br>[CopyLow](https://www.mql5.com/en/docs/series/copylow), [ArraySetAsSeries](https://www.mql5.com/en/docs/array/arraysetasseries) |
| ```<br>double Open[]<br>``` | ```<br>double Open[];<br>int count;   // number of elements to copy<br>ArraySetAsSeries(Open,true);<br>CopyOpen(_Symbol,_Period,0,count,Open);<br>``` | [Open](https://docs.mql4.com/predefined/open "https://docs.mql4.com/predefined/open")<br> Series array that contains open prices of each bar of the current chart.<br>[CopyOpen](https://www.mql5.com/en/docs/series/copyopen), [ArraySetAsSeries](https://www.mql5.com/en/docs/array/arraysetasseries) |
| ```<br>double Point<br>``` | ```<br>double Point=_Point;<br>``` | [Point](https://docs.mql4.com/predefined/pointvar "https://docs.mql4.com/predefined/pointvar")<br> The current symbol point value in the quote currency.<br>[\_Point](https://www.mql5.com/en/docs/check/point) |
| ```<br>datetime Time[]<br>``` | ```<br>datetime Time[];<br>int count;   // number of elements to copy<br>ArraySetAsSeries(Time,true);<br>CopyTime(_Symbol,_Period,0,count,Time);<br>``` | [Time](https://docs.mql4.com/predefined/time "https://docs.mql4.com/predefined/time")<br> Series array that contains open time of each bar of the current chart. Data like datetime represent time, in seconds, that has passed since 00:00 a.m. of 1 January, 1970.<br>[CopyTime](https://www.mql5.com/en/docs/series/copytime), [ArraySetAsSeries](https://www.mql5.com/en/docs/array/arraysetasseries) |
| ```<br>double Volume[]<br>``` | ```<br>long Volume[];<br>int count;   // number of elements to copy<br>ArraySetAsSeries(Volume,true);<br>CopyTickVolume(_Symbol,_Period,0,count,Volume);<br>``` | [Volume](https://docs.mql4.com/predefined/volume "https://docs.mql4.com/predefined/volume")<br> Series array that contains tick volumes of each bar of the current chart.<br>[CopyTickVolume](https://www.mql5.com/en/docs/series/copytickvolume), [ArraySetAsSeries](https://www.mql5.com/en/docs/array/arraysetasseries) |

### 4\. Account Information

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>double AccountBalance()<br>``` | ```<br>double AccountInfoDouble(ACCOUNT_BALANCE)<br>``` | [AccountBalance](https://docs.mql4.com/account/accountbalance "https://docs.mql4.com/account/accountbalance")<br>Returns balance value of the current account (the amount of money on the account). <br>[AccountInfoDouble](https://www.mql5.com/en/docs/account/accountinfodouble) |
| ```<br>double AccountCredit()<br>``` | ```<br>double AccountInfoDouble(ACCOUNT_CREDIT)<br>``` | [AccountCredit](https://docs.mql4.com/account/accountcredit "https://docs.mql4.com/account/accountcredit")<br>Returns credit value of the current account.<br>[AccountInfoDouble](https://www.mql5.com/en/docs/account/accountinfodouble) |
| ```<br>string AccountCompany()<br>``` | ```<br>string AccountInfoString(ACCOUNT_COMPANY)<br>``` | [AccountCompany](https://docs.mql4.com/account/accountcompany "https://docs.mql4.com/account/accountcompany")<br>Returns the brokerage company name where the current account was registered.<br>[AccountInfoString](https://www.mql5.com/en/docs/account/accountinfostring) |
| ```<br>string AccountCurrency()<br>``` | ```<br>string AccountInfoString(ACCOUNT_CURRENCY)<br>``` | [AccountCurrency](https://docs.mql4.com/account/accountcurrency "https://docs.mql4.com/account/accountcurrency")<br>Returns currency name of the current account.<br>[AccountInfoString](https://www.mql5.com/en/docs/account/accountinfostring) |
| ```<br>double AccountEquity()<br>``` | ```<br>double AccountInfoDouble(ACCOUNT_EQUITY)<br>``` | [AccountEquity](https://docs.mql4.com/account/accountequity "https://docs.mql4.com/account/accountequity")<br>Returns equity value of the current account. Equity calculation depends on trading server settings.<br>[AccountInfoDouble](https://www.mql5.com/en/docs/account/accountinfodouble) |
| ```<br>double AccountFreeMargin()<br>``` | ```<br>double AccountInfoDouble(ACCOUNT_FREEMARGIN)<br>``` | [AccountFreeMargin](https://docs.mql4.com/account/accountfreemargin "https://docs.mql4.com/account/accountfreemargin")<br>Returns free margin value of the current account.<br>[AccountInfoDouble](https://www.mql5.com/en/docs/account/accountinfodouble) |
| ```<br>double AccountFreeMarginCheck(string symbol,<br>                              int cmd,<br>                              double volume)<br>``` | - | [AccountFreeMarginCheck](https://docs.mql4.com/account/accountfreemargincheck "https://docs.mql4.com/account/accountfreemargincheck")<br>Returns free margin that remains after the specified position has been opened at the current price on the current account. |
| ```<br>double AccountFreeMarginMode()<br>``` | - | [AccountFreeMarginMode](https://docs.mql4.com/account/accountfreemarginmode "https://docs.mql4.com/account/accountfreemarginmode")<br>Calculation mode of free margin allowed to open positions on the current account. |
| ```<br>int AccountLeverage()<br>``` | ```<br>int AccountInfoInteger(ACCOUNT_LEVERAGE)<br>``` | [AccountLeverage](https://docs.mql4.com/account/accountleverage "https://docs.mql4.com/account/accountleverage")<br>Returns leverage of the current account.<br>[AccountInfoInteger](https://www.mql5.com/en/docs/account/accountinfointeger) |
| ```<br>double AccountMargin()<br>``` | ```<br>double AccountInfoDouble(ACCOUNT_MARGIN)<br>``` | [AccountMargin](https://docs.mql4.com/account/accountmargin "https://docs.mql4.com/account/accountmargin")<br>Returns margin value of the current account.<br>[AccountInfoDouble](https://www.mql5.com/en/docs/account/accountinfodouble) |
| ```<br>string AccountName()<br>``` | ```<br>string AccountInfoString(ACCOUNT_NAME)<br>``` | [AccountName](https://docs.mql4.com/account/accountname "https://docs.mql4.com/account/accountname")<br>Returns the current account name.<br>[AccountInfoString](https://www.mql5.com/en/docs/account/accountinfostring) |
| ```<br>int AccountNumber()<br>``` | ```<br>int AccountInfoInteger(ACCOUNT_LOGIN)<br>``` | [AccountNumber](https://docs.mql4.com/account/accountnumber "https://docs.mql4.com/account/accountnumber")<br>Returns the number of the current account.<br>[AccountInfoInteger](https://www.mql5.com/en/docs/account/accountinfointeger) |
| ```<br>double AccountProfit()<br>``` | ```<br>double AccountInfoDouble(ACCOUNT_PROFIT)<br>``` | [AccountProfit](https://docs.mql4.com/account/accountprofit "https://docs.mql4.com/account/accountprofit")<br>Returns profit value of the current account.<br>[AccountInfoDouble](https://www.mql5.com/en/docs/account/accountinfodouble) |
| ```<br>string AccountServer()<br>``` | ```<br>string AccountInfoString(ACCOUNT_SERVER)<br>``` | [AccountServer](https://docs.mql4.com/account/accountserver "https://docs.mql4.com/account/accountserver")<br>Returns the connected server name.<br>[AccountInfoString](https://www.mql5.com/en/docs/account/accountinfostring) |
| ```<br>int AccountStopoutLevel()<br>``` | ```<br>double AccountInfoDouble(ACCOUNT_MARGIN_SO_SO)<br>``` | [AccountStopoutLevel](https://docs.mql4.com/account/accountstopoutlevel "https://docs.mql4.com/account/accountstopoutlevel")<br>Returns the value of the Stop Out level.<br>[AccountInfoDouble](https://www.mql5.com/en/docs/account/accountinfodouble) |
| ```<br>int AccountStopoutMode()<br>``` | ```<br>int AccountInfoInteger(ACCOUNT_MARGIN_SO_MODE)<br>``` | [AccountStopoutMode](https://docs.mql4.com/account/accountstopoutmode "https://docs.mql4.com/account/accountstopoutmode")<br>Returns the calculation mode for the Stop Out level.<br>[AccountInfoInteger](https://www.mql5.com/en/docs/account/accountinfointeger) |

### 5\. Array Functions

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>int ArrayBsearch(double array[],<br>                 double value,<br>                 int count=WHOLE_ARRAY,<br>                 int start=0,<br>                 int direction=MODE_ASCEND)<br>``` | ```<br>int ArrayBsearch(double    array[],<br>                 double    searched_value<br>                 )<br>``` | [ArrayBsearch](https://docs.mql4.com/array/arraybsearch "https://docs.mql4.com/array/arraybsearch")<br>The function searches for a specified value in a one-dimension numeric array.<br>[ArrayBsearch](https://www.mql5.com/en/docs/array/arraybsearch) |
| ```<br>int ArrayCopy(object&dest[],<br>              object source[],<br>              int start_dest=0,<br>              int start_source=0,<br>              int count=WHOLE_ARRAY)<br>``` | ```<br>int ArrayCopy(void  dst_array[],<br>              void  src_array[],<br>              int   dst_start=0,<br>              int   src_start=0,<br>              int   cnt=WHOLE_ARRAY<br>              )<br>``` | [ArrayCopy](https://docs.mql4.com/array/arraycopy "https://docs.mql4.com/array/arraycopy")<br>Copies an array to another one. Arrays must be of the same type, but arrays with type double\[\], int\[\], datetime\[\], color\[\], and bool\[\] can be copied as arrays of the same type. Returns the amount of copied elements.<br>[ArrayCopy](https://www.mql5.com/en/docs/array/arraycopy) |
| ```<br>int ArrayCopyRates(double&dest_array[],<br>                   string symbol=NULL,<br>                   int timeframe=0)<br>``` | - | [ArrayCopyRates](https://docs.mql4.com/array/arraycopyrates "https://docs.mql4.com/array/arraycopyrates")<br>Copies data of the current chart bars to the two-dimensional array of RateInfo\[\]\[6\] type and returns copied bars amount, or -1 if failed. |
| ```<br>int ArrayCopySeries(double&array[],<br>                    int series_index,<br>                    string symbol=NULL,<br>                    int timeframe=0)<br>``` | ```<br>int ArrayCopySeriesMQL4(double &array[],<br>                        int series_index,<br>                        string symbol=NULL,<br>                        int tf=0)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int count=Bars(symbol,timeframe);<br>   switch(series_index)<br>     {<br>      case MODE_OPEN:<br>         return(CopyOpen(symbol,timeframe,0,count,array));<br>      case MODE_LOW:<br>         return(CopyLow(symbol,timeframe,0,count,array));<br>      case MODE_HIGH:<br>         return(CopyHigh(symbol,timeframe,0,count,array));<br>      case MODE_CLOSE:<br>         return(CopyClose(symbol,timeframe,0,count,array));<br>      default: return(0);<br>     }<br>   return(0);<br>  }<br>``` | [ArrayCopySeries](https://docs.mql4.com/array/arraycopyseries "https://docs.mql4.com/array/arraycopyseries")<br>Copies a timeseries array to a custom array and returns the count of the copied elements.<br>[CopyOpen](https://www.mql5.com/en/docs/series/copyopen), [CopyLow](https://www.mql5.com/en/docs/series/copylow), [CopyHigh](https://www.mql5.com/en/docs/series/copyhigh), [CopyClose](https://www.mql5.com/en/docs/series/copyclose), [Bars](https://www.mql5.com/en/docs/series/bars) |
| ```<br>int ArrayDimension( object array[])<br>``` | - | [ArrayDimension](https://docs.mql4.com/array/arraydimension "https://docs.mql4.com/array/arraydimension")<br>Returns the multidimensional array rank. |
| ```<br>bool ArrayGetAsSeries( object array[])<br>``` | ```<br>bool ArrayGetAsSeries(void  array)<br>``` | [ArrayGetAsSeries](https://docs.mql4.com/array/arraygetasseries "https://docs.mql4.com/array/arraygetasseries")<br>Returns TRUE if an array is organized as a timeseries array (array elements are indexed from the last to the first one), otherwise returns FALSE.<br>[ArrayGetAsSeries](https://www.mql5.com/en/docs/array/arraygetasseries) |
| ```<br>int ArrayInitialize(double &array[],<br>                    double value)<br>``` | ```<br>int ArrayInitializeMQL4(double &array[],<br>                        double value)<br>  {<br>   ArrayInitialize(array,value);<br>   return(ArraySize(array));<br>  }<br>``` | [ArrayInitialize](https://docs.mql4.com/array/arrayinitialize "https://docs.mql4.com/array/arrayinitialize")<br>Sets all elements of a numeric array to the same value. Returns the count of initialized elements.<br>[ArrayInitialize](https://www.mql5.com/en/docs/array/arrayinitialize), [ArraySize](https://www.mql5.com/en/docs/array/arraysize) |
| ```<br>bool ArrayIsSeries( object array[])<br>``` | ```<br>bool ArrayIsSeries(void  array[])<br>``` | [ArrayIsSeries](https://docs.mql4.com/array/arrayisseries "https://docs.mql4.com/array/arrayisseries")<br>Returns TRUE if the array under check is a timeseries array (Time\[\],Open\[\],Close\[\],High\[\],Low\[\], or Volume\[\]), otherwise returns FALSE.<br>[ArrayIsSeries](https://www.mql5.com/en/docs/array/arrayisseries) |
| ```<br>int ArrayMaximum(double array[],<br>                 int count=WHOLE_ARRAY,<br>                 int start=0)<br>``` | ```<br>int ArrayMaximumMQL4(double &array[],<br>                     int count=WHOLE_ARRAY,<br>                     int start=0)<br>  {<br>   return(ArrayMaximum(array,start,count));<br>  }<br>``` | [ArrayMaximum](https://docs.mql4.com/array/arraymaximum "https://docs.mql4.com/array/arraymaximum")<br>Searches for the element with the maximal value. The function returns position of this maximal element in the array.<br>[ArrayMaximum](https://www.mql5.com/en/docs/array/arraymaximum) |
| ```<br>int ArrayMinimum(double array[],<br>                 int count=WHOLE_ARRAY,<br>                 int start=0)<br>``` | ```<br>int ArrayMinimumMQL4(double &array[],<br>                     int count=WHOLE_ARRAY,<br>                     int start=0)<br>  {<br>   return(ArrayMinimum(array,start,count));<br>  }<br>``` | [ArrayMinimum](https://docs.mql4.com/array/arrayminimum "https://docs.mql4.com/array/arrayminimum")<br>Searches for the element with the minimal value. The function returns position of this minimal element in the array.<br>[ArrayMinimum](https://www.mql5.com/en/docs/array/arrayminimum) |
| ```<br>int ArrayRange(object array[],<br>               int range_index)<br>``` | ```<br>int ArrayRange(void  array[],<br>               int   rank_index<br>               )<br>``` | [ArrayRange](https://docs.mql4.com/array/arrayrange "https://docs.mql4.com/array/arrayrange")<br>Returns the count of elements in the given dimension of the array.<br>[ArrayRange](https://www.mql5.com/en/docs/array/arrayrange) |
| ```<br>int ArrayResize(object &array[],<br>                int new_size)<br>``` | ```<br>int ArrayResize(void  array[],<br>                int   new_size,<br>                int   allocated_size=0<br>                )<br>``` | [ArrayResize](https://docs.mql4.com/array/arrayresize "https://docs.mql4.com/array/arrayresize")<br>Sets a new size for the first dimension.<br>[ArrayResize](https://www.mql5.com/en/docs/array/arrayresize) |
| ```<br>bool ArraySetAsSeries(double &array[],<br>                      bool set)<br>``` | ```<br>bool ArraySetAsSeries(void  array[],<br>                      bool  set<br>                      )<br>``` | [ArraySetAsSeries](https://docs.mql4.com/array/arraysetasseries "https://docs.mql4.com/array/arraysetasseries")<br>Returns the count of elements in the given dimension of the array. Since indexes are zero-based, the size of dimension is 1 greater than the largest index.<br>[ArraySetAsSeries](https://www.mql5.com/en/docs/array/arraysetasseries) |
| ```<br>int ArraySize( object array[])<br>``` | ```<br>int ArraySize(void  array[])<br>``` | [ArraySize](https://docs.mql4.com/array/arraysize "https://docs.mql4.com/array/arraysize")<br>Returns the count of elements contained in the array.<br>[ArraySize](https://www.mql5.com/en/docs/array/arraysize) |
| ```<br>int ArraySort(double &array[],<br>              int count=WHOLE_ARRAY,<br>              int start=0,<br>              int sort_dir=MODE_ASCEND)<br>``` | ```<br>int ArraySortMQL4(double &array[],<br>                  int count=WHOLE_ARRAY,<br>                  int start=0,<br>                  int sort_dir=MODE_ASCEND)<br>  {<br>   switch(sort_dir)<br>     {<br>      case MODE_ASCEND:<br>         ArraySetAsSeries(array,true);<br>      case MODE_DESCEND:<br>         ArraySetAsSeries(array,false);<br>      default: ArraySetAsSeries(array,true);<br>     }<br>   ArraySort(array);<br>   return(0);<br>  }<br>``` | [ArraySort](https://docs.mql4.com/array/arraysort "https://docs.mql4.com/array/arraysort")<br>Sorts numeric arrays by first dimension. Series arrays cannot be sorted by ArraySort().<br>[ArraySort](https://www.mql5.com/en/docs/array/arraysort), [ArraySetAsSeries](https://www.mql5.com/en/docs/array/arraysetasseries) |

### 6\. Checkup

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>int GetLastError()<br>``` | ```<br>int GetLastError()<br>``` | [GetLastError](https://docs.mql4.com/check/getlasterror "https://docs.mql4.com/check/getlasterror")<br>The function returns the last occurred error, then the value of special last\_error variable where the last error code is stored will be zeroized.<br>[GetLastError](https://www.mql5.com/en/docs/check/getlasterror) |
| ```<br>bool IsConnected()<br>``` | ```<br>bool TerminalInfoInteger(TERMINAL_CONNECTED)<br>``` | [IsConnected](https://docs.mql4.com/check/isconnected "https://docs.mql4.com/check/isconnected")<br>The function returns the status of the main connection between the client terminal and the server that performs data pumping. It returns TRUE if connection to the server was successfully established, otherwise, it returns FALSE.<br>[TerminalInfoInteger](https://www.mql5.com/en/docs/check/terminalinfointeger) |
| ```<br>bool IsDemo()<br>``` | ```<br>bool IsDemoMQL4()<br>  {<br>   if(AccountInfoInteger(ACCOUNT_TRADE_MODE)==ACCOUNT_TRADE_MODE_DEMO)<br>      return(true);<br>   else<br>      return(false);<br>  }<br>``` | [IsDemo](https://docs.mql4.com/check/isdemo "https://docs.mql4.com/check/isdemo")<br>Returns TRUE if the expert runs on a demo account, otherwise returns FALSE. <br>[AccountInfoInteger](https://www.mql5.com/en/docs/account/accountinfointeger) |
| ```<br>bool IsDllsAllowed()<br>``` | ```<br>bool TerminalInfoInteger(TERMINAL_DLLS_ALLOWED)<br>``` | [IsDllsAllowed](https://docs.mql4.com/check/isdllsallowed "https://docs.mql4.com/check/isdllsallowed")<br>Returns TRUE if the function DLL call is allowed for the Expert Advisor, otherwise returns FALSE.<br>[TerminalInfoInteger](https://www.mql5.com/en/docs/check/terminalinfointeger) |
| ```<br>bool IsExpertEnabled()<br>``` | ```<br>bool AccountInfoInteger(ACCOUNT_TRADE_EXPERT)<br>``` | [IsExpertEnabled](https://docs.mql4.com/check/isexpertenabled "https://docs.mql4.com/check/isexpertenabled")<br>Returns TRUE if use of Expert Advisors is enabled in the client terminal, otherwise returns FALSE.<br>[AccountInfoInteger](https://www.mql5.com/en/docs/account/accountinfointeger) |
| ```<br>bool IsLibrariesAllowed()<br>``` | ```<br>bool MQLInfoInteger(MQL5_DLLS_ALLOWED)<br>``` | [IsLibrariesAllowed](https://docs.mql4.com/check/islibrariesallowed "https://docs.mql4.com/check/islibrariesallowed")<br>Returns TRUE if an Expert Advisor can call library function, otherwise returns FALSE.<br>[MQLInfoInteger](https://www.mql5.com/en/docs/check/mqlinfointeger) |
| ```<br>bool IsOptimization()<br>``` | ```<br>bool MQLInfoInteger(MQL5_OPTIMIZATION)<br>``` | [IsOptimization](https://docs.mql4.com/check/isoptimization "https://docs.mql4.com/check/isoptimization")<br>Returns TRUE if an Expert Advisor is running in the strategy tester optimization mode, otherwise returns FALSE.<br>[MQLInfoInteger](https://www.mql5.com/en/docs/check/mqlinfointeger) |
| ```<br>bool IsStopped()<br>``` | ```<br>bool IsStopped()<br>``` | [IsStopped](https://docs.mql4.com/check/isstopped "https://docs.mql4.com/check/isstopped")<br>Returns TRUE if the program (an Expert Advisor or a script) has been commanded to stop its operation, otherwise returns FALSE.<br>[IsStopped](https://www.mql5.com/en/docs/check/isstopped) |
| ```<br>bool IsTesting()<br>``` | ```<br>bool MQLInfoInteger(MQL5_TESTING)<br>``` | [IsTesting](https://docs.mql4.com/check/istesting "https://docs.mql4.com/check/istesting")<br>Returns TRUE if an Expert Advisor is running in the testing mode, otherwise returns FALSE.<br>[MQLInfoInteger](https://www.mql5.com/en/docs/check/mqlinfointeger) |
| ```<br>bool IsTradeAllowed()<br>``` | ```<br>bool MQLInfoInteger(MQL5_TRADE_ALLOWED)<br>``` | [IsTradeAllowed](https://docs.mql4.com/check/istradeallowed "https://docs.mql4.com/check/istradeallowed")<br>Returns TRUE if trading by Expert Advisors is allowed and a thread for trading is not occupied, otherwise returns FALSE.<br>[MQLInfoInteger](https://www.mql5.com/en/docs/check/mqlinfointeger) |
| ```<br>bool IsTradeContextBusy()<br>``` | - | [IsTradeContextBusy](https://docs.mql4.com/check/istradecontextbusy "https://docs.mql4.com/check/istradecontextbusy")<br>Returns TRUE if a thread for trading is occupied by another Expert Advisor, otherwise returns FALSE. |
| ```<br>bool IsVisualMode()<br>``` | ```<br>bool MQLInfoInteger(MQL5_VISUAL_MODE)<br>``` | [IsVisualMode](https://docs.mql4.com/check/isvisualmode "https://docs.mql4.com/check/isvisualmode")<br>Returns TRUE if the Expert Advisor is tested with checked "Visual Mode" button, otherwise returns FALSE.<br>[MQLInfoInteger](https://www.mql5.com/en/docs/check/mqlinfointeger) |
| ```<br>int UninitializeReason()<br>``` | ```<br>int UninitializeReason()<br>``` | [UninitializeReason](https://docs.mql4.com/check/uninitializereason "https://docs.mql4.com/check/uninitializereason")<br>Returns the code of the uninitialization reason for Expert Advisors, custom indicators, and scripts.<br>[UninitializeReason](https://www.mql5.com/en/docs/check/uninitializereason) |

### 7\. Client Terminal

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>string TerminalCompany()<br>``` | ```<br>string TerminalInfoString(TERMINAL_COMPANY)<br>``` | [TerminalCompany](https://docs.mql4.com/check/terminalcompany "https://docs.mql4.com/check/terminalcompany")<br>Returns the name of company owning the client terminal.<br>[TerminalInfoString](https://www.mql5.com/en/docs/check/terminalinfostring) |
| ```<br>string TerminalName()<br>``` | ```<br>string TerminalInfoString(TERMINAL_NAME)<br>``` | [TerminalName](https://docs.mql4.com/check/terminalname "https://docs.mql4.com/check/terminalname")<br>Returns client terminal name.<br>[TerminalInfoString](https://www.mql5.com/en/docs/check/terminalinfostring) |
| ```<br>string TerminalPath()<br>``` | ```<br>string TerminalInfoString(TERMINAL_PATH)<br>``` | [TerminalPath](https://docs.mql4.com/check/terminalpath "https://docs.mql4.com/check/terminalpath")<br>Returns the directory, from which the client terminal was launched.<br>[TerminalInfoString](https://www.mql5.com/en/docs/check/terminalinfostring) |

### 8\. Common Functions

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>void Alert(...)<br>``` | ```<br>void Alert(argument,...)<br>``` | [Alert](https://docs.mql4.com/common/alert "https://docs.mql4.com/common/alert")<br>Displays a dialog box containing the user-defined data. Parameters can be of any type.<br>[Alert](https://www.mql5.com/en/docs/common/alert) |
| ```<br>void Comment(...)<br>``` | ```<br>void Comment(argument,...)<br>``` | [Comment](https://docs.mql4.com/common/comment "https://docs.mql4.com/common/comment")<br>The function outputs the comment defined by the user in the left top corner of the chart.<br>[Comment](https://www.mql5.com/en/docs/common/comment) |
| ```<br>int GetTickCount()<br>``` | ```<br>uint GetTickCount()<br>``` | [GetTickCount](https://docs.mql4.com/common/gettickcount "https://docs.mql4.com/common/gettickcount")<br>The GetTickCount() function retrieves the number of milliseconds that have elapsed since the system was started.<br>[GetTickCount](https://www.mql5.com/en/docs/common/gettickcount) |
| ```<br>double MarketInfo(string symbol,<br>                  int type)<br>``` | ```<br>double MarketInfoMQL4(string symbol,<br>                      int type)<br>  {<br>   switch(type)<br>     {<br>      case MODE_LOW:<br>         return(SymbolInfoDouble(symbol,SYMBOL_LASTLOW));<br>      case MODE_HIGH:<br>         return(SymbolInfoDouble(symbol,SYMBOL_LASTHIGH));<br>      case MODE_TIME:<br>         return(SymbolInfoInteger(symbol,SYMBOL_TIME));<br>      case MODE_BID:<br>         return(Bid);<br>      case MODE_ASK:<br>         return(Ask);<br>      case MODE_POINT:<br>         return(SymbolInfoDouble(symbol,SYMBOL_POINT));<br>      case MODE_DIGITS:<br>         return(SymbolInfoInteger(symbol,SYMBOL_DIGITS));<br>      case MODE_SPREAD:<br>         return(SymbolInfoInteger(symbol,SYMBOL_SPREAD));<br>      case MODE_STOPLEVEL:<br>         return(SymbolInfoInteger(symbol,SYMBOL_TRADE_STOPS_LEVEL));<br>      case MODE_LOTSIZE:<br>         return(SymbolInfoDouble(symbol,SYMBOL_TRADE_CONTRACT_SIZE));<br>      case MODE_TICKVALUE:<br>         return(SymbolInfoDouble(symbol,SYMBOL_TRADE_TICK_VALUE));<br>      case MODE_TICKSIZE:<br>         return(SymbolInfoDouble(symbol,SYMBOL_TRADE_TICK_SIZE));<br>      case MODE_SWAPLONG:<br>         return(SymbolInfoDouble(symbol,SYMBOL_SWAP_LONG));<br>      case MODE_SWAPSHORT:<br>         return(SymbolInfoDouble(symbol,SYMBOL_SWAP_SHORT));<br>      case MODE_STARTING:<br>         return(0);<br>      case MODE_EXPIRATION:<br>         return(0);<br>      case MODE_TRADEALLOWED:<br>         return(0);<br>      case MODE_MINLOT:<br>         return(SymbolInfoDouble(symbol,SYMBOL_VOLUME_MIN));<br>      case MODE_LOTSTEP:<br>         return(SymbolInfoDouble(symbol,SYMBOL_VOLUME_STEP));<br>      case MODE_MAXLOT:<br>         return(SymbolInfoDouble(symbol,SYMBOL_VOLUME_MAX));<br>      case MODE_SWAPTYPE:<br>         return(SymbolInfoInteger(symbol,SYMBOL_SWAP_MODE));<br>      case MODE_PROFITCALCMODE:<br>         return(SymbolInfoInteger(symbol,SYMBOL_TRADE_CALC_MODE));<br>      case MODE_MARGINCALCMODE:<br>         return(0);<br>      case MODE_MARGININIT:<br>         return(0);<br>      case MODE_MARGINMAINTENANCE:<br>         return(0);<br>      case MODE_MARGINHEDGED:<br>         return(0);<br>      case MODE_MARGINREQUIRED:<br>         return(0);<br>      case MODE_FREEZELEVEL:<br>         return(SymbolInfoInteger(symbol,SYMBOL_TRADE_FREEZE_LEVEL));<br>      default: return(0);<br>     }<br>   return(0);<br>  }<br>``` | [MarketInfo](https://docs.mql4.com/marketinformation/marketinfo "https://docs.mql4.com/marketinformation/marketinfo")<br>Returns various data about securities listed in the Market Watch window.<br>[SymbolInfoInteger](https://www.mql5.com/en/docs/marketinformation/symbolinfointeger), [SymbolInfoDouble](https://www.mql5.com/en/docs/marketinformation/symbolinfodouble), [Bid](https://www.mql5.com/en/docs/marketinformation/symbolinfotick), [Ask](https://www.mql5.com/en/docs/marketinformation/symbolinfotick) |
| ```<br>int MessageBox(string text=NULL,<br>               string caption=NULL,<br>               int flags=EMPTY)<br>``` | ```<br>int MessageBox(string  text,<br>               string  caption=NULL,<br>               int     flags=0)<br>``` | [MessageBox](https://docs.mql4.com/common/messagebox "https://docs.mql4.com/common/messagebox")<br>The MessageBox function creates, displays, and operates message box.<br>[MessageBox](https://www.mql5.com/en/docs/common/messagebox) |
| ```<br>void PlaySound(string filename)<br>``` | ```<br>bool PlaySound(string filename)<br>``` | [PlaySound](https://docs.mql4.com/common/playsound "https://docs.mql4.com/common/playsound")<br>Function plays a sound file.<br>[PlaySound](https://www.mql5.com/en/docs/common/playsound) |
| ```<br>void Print(...)<br>``` | ```<br>void Print(argument,...)<br>``` | [Print](https://docs.mql4.com/common/print "https://docs.mql4.com/common/print")<br>Prints a message to the experts log.<br>[Print](https://www.mql5.com/en/docs/common/print) |
| ```<br>bool SendFTP(string filename,<br>             string ftp_path=NULL)<br>``` | ```<br>bool SendFTP(string filename,<br>             string ftp_path=NULL)<br>``` | [SendFTP](https://docs.mql4.com/common/sendftp "https://docs.mql4.com/common/sendftp")<br>Sends the file to the FTP server set in the Tools->Options->Publisher tab. If the attempt fails, it retuns FALSE.<br>[SendFTP](https://www.mql5.com/en/docs/network/sendftp) |
| ```<br>void SendMail(string subject,<br>              string some_text)<br>``` | ```<br>bool SendMail(string  subject,<br>              string  some_text)<br>``` | [SendMail](https://docs.mql4.com/common/sendmail "https://docs.mql4.com/common/sendmail")<br>Sends a message to the e-mail set in the Tools->Options->EMail tab.<br>[SendMail](https://www.mql5.com/en/docs/network/sendmail) |
| ```<br>void Sleep(int milliseconds)<br>``` | ```<br>void Sleep(int milliseconds)<br>``` | [Sleep](https://docs.mql4.com/common/sleep "https://docs.mql4.com/common/sleep")<br>The Sleep() function suspends execution of the current expert within the specified interval.<br>[Sleep](https://www.mql5.com/en/docs/common/sleep) |

### 9\. Conversion Functions

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>string CharToStr(int char_code)<br>``` | ```<br>string CharToString(int char_code)<br>``` | [CharToStr](https://docs.mql4.com/convert/chartostr "https://docs.mql4.com/convert/chartostr")<br>Conversion of the symbol code into a one-character string.<br>[CharToString](https://www.mql5.com/en/docs/convert/chartostring) |
| ```<br>string DoubleToStr(double value,<br>                   int digits)<br>``` | ```<br>string DoubleToString(double value,<br>                      int digits=8)<br>``` | [DoubleToStr](https://docs.mql4.com/convert/doubletostr "https://docs.mql4.com/convert/doubletostr")<br>Returns text string with the specified numerical value converted into a specified precision format.<br>[DoubleToString](https://www.mql5.com/en/docs/convert/doubletostring) |
| ```<br>double NormalizeDouble(double value,<br>                       int digits)<br>``` | ```<br>double NormalizeDouble(double value,<br>                       int digits)<br>``` | [NormalizeDouble](https://docs.mql4.com/convert/normalizedouble "https://docs.mql4.com/convert/normalizedouble")<br>Rounds the floating point value to the given precision. Returns normalized value of the double type.<br>[NormalizeDouble](https://www.mql5.com/en/docs/convert/normalizedouble) |
| ```<br>double StrToDouble(string value)<br>``` | ```<br>double StringToDouble(string value)<br>``` | [StrToDouble](https://docs.mql4.com/convert/strtodouble "https://docs.mql4.com/convert/strtodouble")<br>Converts string representation of number to double type (double-precision format with floating point).<br>[StringToDouble](https://www.mql5.com/en/docs/convert/stringtodouble) |
| ```<br>int StrToInteger(string value)<br>``` | ```<br>long StringToInteger(string value)<br>``` | [StrToInteger](https://docs.mql4.com/convert/strtointeger "https://docs.mql4.com/convert/strtointeger")<br>Converts string containing the value character representation into a value of the int (integer) type.<br>[StringToInteger](https://www.mql5.com/en/docs/convert/stringtointeger) |
| ```<br>datetime StrToTime(string value)<br>``` | ```<br>datetime StringToTime(string value)<br>``` | [StrToTime](https://docs.mql4.com/convert/strtotime "https://docs.mql4.com/convert/strtotime")<br>Converts string in the format "yyyy.mm.dd hh:mi" to datetime type (the amount of seconds that have passed since 1 Jan., 1970).<br>[StringToTime](https://www.mql5.com/en/docs/convert/stringtotime) |
| ```<br>string TimeToStr(datetime value,<br>                 int mode=TIME_DATE|TIME_MINUTES)<br>``` | ```<br>string TimeToString(datetime value,<br>                    int mode=TIME_DATE|TIME_MINUTES)<br>``` | [TimeToStr](https://docs.mql4.com/convert/timetostr "https://docs.mql4.com/convert/timetostr")<br>Converts value containing time in seconds that has passed since January 1, 1970, into a string of "yyyy.mm.dd hh:mi" format.<br>[TimeToString](https://www.mql5.com/en/docs/convert/timetostring) |

### 10\. Custom Indicators

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>void IndicatorBuffers(int count)<br>``` | - | [IndicatorBuffers](https://docs.mql4.com/customind/indicatorbuffers "https://docs.mql4.com/customind/indicatorbuffers")<br>Allocates memory for buffers used for custom indicator calculations. |
| ```<br>int IndicatorCounted()<br>``` | ```<br>int IndicatorCountedMQL4()<br>  {<br>   if(prev_calculated>0) return(prev_calculated-1);<br>   if(prev_calculated==0) return(0);<br>   return(0);<br>  }<br>``` | [IndicatorCounted](https://docs.mql4.com/customind/indicatorcounted "https://docs.mql4.com/customind/indicatorcounted")<br>The function returns the amount of bars not changed after the indicator had been launched last.<br>[OnCalculate](https://www.mql5.com/en/docs/basis/function/events#oncalculate) |
| ```<br>void IndicatorDigits(int digits)<br>``` | ```<br>bool IndicatorSetInteger(INDICATOR_DIGITS,digits)<br>``` | [IndicatorDigits](https://docs.mql4.com/customind/indicatordigits "https://docs.mql4.com/customind/indicatordigits")<br>Sets precision format (the count of digits after decimal point) to visualize indicator values.<br>[IndicatorSetInteger](https://www.mql5.com/en/docs/customind/indicatorsetinteger) |
| ```<br>void IndicatorShortName(string name)<br>``` | ```<br>bool IndicatorSetString(INDICATOR_SHORTNAME,name)<br>``` | [IndicatorShortName](https://docs.mql4.com/customind/indicatorshortname "https://docs.mql4.com/customind/indicatorshortname")<br>Sets the "short" name of a custom indicator to be shown in the DataWindow and in the chart subwindow.<br>[IndicatorSetString](https://www.mql5.com/en/docs/customind/indicatorsetstring) |
| ```<br>void SetIndexArrow(int index,<br>                   int code)<br>``` | ```<br>bool PlotIndexSetInteger(index,PLOT_ARROW,code)<br>``` | [SetIndexArrow](https://docs.mql4.com/customind/setindexarrow "https://docs.mql4.com/customind/setindexarrow")<br>Sets an arrow symbol for indicators line of the DRAW\_ARROW type.<br>[PlotIndexSetInteger](https://www.mql5.com/en/docs/customind/plotindexsetinteger) |
| ```<br>bool SetIndexBuffer(int index,<br>                    double array[])<br>``` | ```<br>bool SetIndexBuffer(index,array,INDICATOR_DATA)<br>``` | [SetIndexBuffer](https://docs.mql4.com/customind/setindexbuffer "https://docs.mql4.com/customind/setindexbuffer")<br>Binds the array variable declared at a global level to the custom indicator pre-defined buffer.<br>[SetIndexBuffer](https://www.mql5.com/en/docs/customind/setindexbuffer) |
| ```<br>void SetIndexDrawBegin(int index,<br>                       int begin)<br>``` | ```<br>bool PlotIndexSetInteger(index,PLOT_DRAW_BEGIN,begin)<br>``` | [SetIndexDrawBegin](https://docs.mql4.com/customind/setindexdrawbegin "https://docs.mql4.com/customind/setindexdrawbegin")<br>Sets the bar number (from the data beginning) from which the drawing of the given indicator line must start.<br>[PlotIndexSetInteger](https://www.mql5.com/en/docs/customind/plotindexsetinteger) |
| ```<br>void SetIndexEmptyValue(int index,<br>                        double value)<br>``` | ```<br>bool PlotIndexSetDouble(index,PLOT_EMPTY_VALUE,value)<br>``` | [SetIndexEmptyValue](https://docs.mql4.com/customind/setindexemptyvalue "https://docs.mql4.com/customind/setindexemptyvalue")<br>Sets drawing line empty value.<br>[PlotIndexSetDouble](https://www.mql5.com/en/docs/customind/plotindexsetdouble) |
| ```<br>void SetIndexLabel(int index,<br>                   string text)<br>``` | ```<br>bool PlotIndexSetString(index,PLOT_LABEL,text)<br>``` | [SetIndexLabel](https://docs.mql4.com/customind/setindexlabel "https://docs.mql4.com/customind/setindexlabel")<br>Sets drawing line description for showing in the DataWindow and in the tooltip.<br>[PlotIndexSetString](https://www.mql5.com/en/docs/customind/plotindexsetstring) |
| ```<br>void SetIndexShift(int index,<br>                   int shift)<br>``` | ```<br>bool PlotIndexSetInteger(index,PLOT_SHIFT,shift)<br>``` | [SetIndexShift](https://docs.mql4.com/customind/setindexshift "https://docs.mql4.com/customind/setindexshift")<br>Sets offset for the drawing line.<br>[PlotIndexSetInteger](https://www.mql5.com/en/docs/customind/plotindexsetinteger) |
| ```<br>void SetIndexStyle(int index,<br>                   int type,<br>                   int style=EMPTY,<br>                   int width=EMPTY,<br>                   color clr=CLR_NONE)<br>``` | ```<br>void SetIndexStyleMQL4(int index,<br>                       int type,<br>                       int style=EMPTY,<br>                       int width=EMPTY,<br>                       color clr=CLR_NONE)<br>  {<br>   if(width>-1)<br>      PlotIndexSetInteger(index,PLOT_LINE_WIDTH,width);<br>   if(clr!=CLR_NONE)<br>      PlotIndexSetInteger(index,PLOT_LINE_COLOR,clr);<br>   switch(type)<br>     {<br>      case 0:<br>         PlotIndexSetInteger(index,PLOT_DRAW_TYPE,DRAW_LINE);<br>      case 1:<br>         PlotIndexSetInteger(index,PLOT_DRAW_TYPE,DRAW_SECTION);<br>      case 2:<br>         PlotIndexSetInteger(index,PLOT_DRAW_TYPE,DRAW_HISTOGRAM);<br>      case 3:<br>         PlotIndexSetInteger(index,PLOT_DRAW_TYPE,DRAW_ARROW);<br>      case 4:<br>         PlotIndexSetInteger(index,PLOT_DRAW_TYPE,DRAW_ZIGZAG);<br>      case 12:<br>         PlotIndexSetInteger(index,PLOT_DRAW_TYPE,DRAW_NONE);<br>      default:<br>         PlotIndexSetInteger(index,PLOT_DRAW_TYPE,DRAW_LINE);<br>     }<br>   switch(style)<br>     {<br>      case 0:<br>         PlotIndexSetInteger(index,PLOT_LINE_STYLE,STYLE_SOLID);<br>      case 1:<br>         PlotIndexSetInteger(index,PLOT_LINE_STYLE,STYLE_DASH);<br>      case 2:<br>         PlotIndexSetInteger(index,PLOT_LINE_STYLE,STYLE_DOT);<br>      case 3:<br>         PlotIndexSetInteger(index,PLOT_LINE_STYLE,STYLE_DASHDOT);<br>      case 4:<br>         PlotIndexSetInteger(index,PLOT_LINE_STYLE,STYLE_DASHDOTDOT);<br>      default: return;<br>     }<br>``` | [SetIndexStyle](https://docs.mql4.com/customind/setindexstyle "https://docs.mql4.com/customind/setindexstyle")<br>Sets the new type, style, width and color for a given indicator line.<br>[PlotIndexSetInteger](https://www.mql5.com/en/docs/customind/plotindexsetinteger) |
| ```<br>void SetLevelStyle(int draw_style,<br>                   int line_width,<br>                   color clr=CLR_NONE)<br>``` | ```<br>void SetLevelStyleMQL4(int draw_style,<br>                       int line_width,<br>                       color clr=CLR_NONE)<br>  {<br>   IndicatorSetInteger(INDICATOR_LEVELWIDTH,line_width);<br>   if(clr!=CLR_NONE)<br>      IndicatorSetInteger(INDICATOR_LEVELCOLOR,clr);<br>   switch(draw_style)<br>     {<br>      case 0:<br>         IndicatorSetInteger(INDICATOR_LEVELSTYLE,STYLE_SOLID);<br>      case 1:<br>         IndicatorSetInteger(INDICATOR_LEVELSTYLE,STYLE_DASH);<br>      case 2:<br>         IndicatorSetInteger(INDICATOR_LEVELSTYLE,STYLE_DOT);<br>      case 3:<br>         IndicatorSetInteger(INDICATOR_LEVELSTYLE,STYLE_DASHDOT);<br>      case 4:<br>         IndicatorSetInteger(INDICATOR_LEVELSTYLE,STYLE_DASHDOTDOT);<br>      default: return;<br>     }<br>  }<br>``` | [SetLevelStyle](https://docs.mql4.com/customind/setlevelstyle "https://docs.mql4.com/customind/setlevelstyle")<br>The function sets a new style, width and color of horizontal levels of indicator to be output in a separate window.<br>[IndicatorSetInteger](https://www.mql5.com/en/docs/customind/indicatorsetinteger) |
| ```<br>void SetLevelValue(int level,<br>                   double value)<br>``` | ```<br>bool IndicatorSetDouble(INDICATOR_LEVELVALUE,level,value)<br>``` | [SetLevelValue](https://docs.mql4.com/customind/setlevelvalue "https://docs.mql4.com/customind/setlevelvalue")<br>The function sets a value for a given horizontal level of the indicator to be output in a separate window.<br>[IndicatorSetDouble](https://www.mql5.com/en/docs/customind/indicatorsetdouble) |

### 11\. Date and Time Functions

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>int Day()<br>``` | ```<br>int DayMQL4()<br>  {<br>   MqlDateTime tm;<br>   TimeCurrent(tm);<br>   return(tm.day);<br>  }<br>``` | [Day](https://docs.mql4.com/dateandtime/day "https://docs.mql4.com/dateandtime/day")<br>Returns the current day of the month, i.e., the day of month of the last known server time.<br>[TimeCurrent](https://www.mql5.com/en/docs/dateandtime/timecurrent), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |
| ```<br>int DayOfWeek()<br>``` | ```<br>int DayOfWeekMQL4()<br>  {<br>   MqlDateTime tm;<br>   TimeCurrent(tm);<br>   return(tm.day_of_week);<br>  }<br>``` | [DayOfWeek](https://docs.mql4.com/dateandtime/dayofweek "https://docs.mql4.com/dateandtime/dayofweek")<br>Returns the current zero-based day of the week (0-Sunday,1,2,3,4,5,6) of the last known server time.<br>[TimeCurrent](https://www.mql5.com/en/docs/dateandtime/timecurrent), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |
| ```<br>int DayOfYear()<br>``` | ```<br>int DayOfYearMQL4()<br>  {<br>   MqlDateTime tm;<br>   TimeCurrent(tm);<br>   return(tm.day_of_year);<br>  }<br>``` | [DayOfYear](https://docs.mql4.com/dateandtime/dayofyear "https://docs.mql4.com/dateandtime/dayofyear")<br>Returns the current day of the year (1 means 1 January,..,365(6) does 31 December), i.e., the day of year of the last known server time.<br>[TimeCurrent](https://www.mql5.com/en/docs/dateandtime/timecurrent), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |
| ```<br>int Hour()<br>``` | ```<br>int HourMQL4()<br>  {<br>   MqlDateTime tm;<br>   TimeCurrent(tm);<br>   return(tm.hour);<br>  }<br>``` | [Hour](https://docs.mql4.com/dateandtime/hour "https://docs.mql4.com/dateandtime/hour")<br>Returns the hour (0,1,2,..23) of the last known server time by the moment of the program start (this value will not change within the time of the program execution).<br>[TimeCurrent](https://www.mql5.com/en/docs/dateandtime/timecurrent), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |
| ```<br>int Minute()<br>``` | ```<br>int MinuteMQL4()<br>  {<br>   MqlDateTime tm;<br>   TimeCurrent(tm);<br>   return(tm.min);<br>  }<br>``` | [Minute](https://docs.mql4.com/dateandtime/minute "https://docs.mql4.com/dateandtime/minute")<br>Returns the current minute (0,1,2,..59) of the last known server time by the moment of the program start (this value will not change within the time of the program execution).<br>[TimeCurrent](https://www.mql5.com/en/docs/dateandtime/timecurrent), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |
| ```<br>int Month()<br>``` | ```<br>int MonthMQL4()<br>  {<br>   MqlDateTime tm;<br>   TimeCurrent(tm);<br>   return(tm.mon);<br>  }<br>``` | [Month](https://docs.mql4.com/dateandtime/month "https://docs.mql4.com/dateandtime/month")<br>Returns the current month as number (1-January,2,3,4,5,6,7,8,9,10,11,12), i.e., the number of month of the last known server time.<br>[TimeCurrent](https://www.mql5.com/en/docs/dateandtime/timecurrent), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |
| ```<br>int Seconds()<br>``` | ```<br>int SecondsMQL4()<br>  {<br>   MqlDateTime tm;<br>   TimeCurrent(tm);<br>   return(tm.sec);<br>  }<br>``` | [Seconds](https://docs.mql4.com/dateandtime/seconds "https://docs.mql4.com/dateandtime/seconds")<br>Returns the amount of seconds elapsed from the beginning of the current minute of the last known server time by the moment of the program start (this value will not change within the time of the program execution).<br>[TimeCurrent](https://www.mql5.com/en/docs/dateandtime/timecurrent), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |
| ```<br>datetime TimeCurrent()<br>``` | ```<br>datetime TimeCurrent()<br>``` | [TimeCurrent](https://docs.mql4.com/dateandtime/timecurrent "https://docs.mql4.com/dateandtime/timecurrent")<br>Returns the last known server time (time of incoming of the latest quote) as number of seconds elapsed from 00:00 January 1, 1970.<br>[TimeCurrent](https://www.mql5.com/en/docs/dateandtime/timecurrent) |
| ```<br>int TimeDay(datetime date)<br>``` | ```<br>int TimeDayMQL4(datetime date)<br>  {<br>   MqlDateTime tm;<br>   TimeToStruct(date,tm);<br>   return(tm.day);<br>  }<br>``` | [TimeDay](https://docs.mql4.com/dateandtime/timeday "https://docs.mql4.com/dateandtime/timeday")<br>Returns day of month (1 - 31) for the specified date.<br>[TimeToStruct](https://www.mql5.com/en/docs/dateandtime/timetostruct), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |
| ```<br>int TimeDayOfWeek(datetime date)<br>``` | ```<br>int TimeDayOfWeekMQL4(datetime date)<br>  {<br>   MqlDateTime tm;<br>   TimeToStruct(date,tm);<br>   return(tm.day_of_week);<br>  }<br>``` | [TimeDayOfWeek](https://docs.mql4.com/dateandtime/timedayofweek "https://docs.mql4.com/dateandtime/timedayofweek")<br>Returns the zero-based day of week (0 means Sunday,1,2,3,4,5,6) for the specified date.<br>[TimeToStruct](https://www.mql5.com/en/docs/dateandtime/timetostruct), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |
| ```<br>int TimeDayOfYear(datetime date)<br>``` | ```<br>int TimeDayOfYearMQL4(datetime date)<br>  {<br>   MqlDateTime tm;<br>   TimeToStruct(date,tm);<br>   return(tm.day_of_year);<br>  }<br>``` | [TimeDayOfYear](https://docs.mql4.com/dateandtime/timedayofyear "https://docs.mql4.com/dateandtime/timedayofyear")<br>Returns day (1 means 1 January,..,365(6) does 31 December) of year for the specified date.<br>[TimeToStruct](https://www.mql5.com/en/docs/dateandtime/timetostruct), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |
| ```<br>int TimeHour(datetime time)<br>``` | ```<br>int TimeHourMQL4(datetime date)<br>  {<br>   MqlDateTime tm;<br>   TimeToStruct(date,tm);<br>   return(tm.hour);<br>  }<br>``` | [TimeHour](https://docs.mql4.com/dateandtime/timehour "https://docs.mql4.com/dateandtime/timehour")<br>Returns the hour for the specified time.<br>[TimeToStruct](https://www.mql5.com/en/docs/dateandtime/timetostruct), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |
| ```<br>datetime TimeLocal()<br>``` | ```<br>datetime TimeLocal()<br>``` | [TimeLocal](https://docs.mql4.com/dateandtime/timelocal "https://docs.mql4.com/dateandtime/timelocal")<br>Returns local computer time as number of seconds elapsed from 00:00 January 1, 1970.<br>[TimeLocal](https://www.mql5.com/en/docs/dateandtime/timelocal) |
| ```<br>int TimeMinute(datetime time)<br>``` | ```<br>int TimeMinuteMQL4(datetime date)<br>  {<br>   MqlDateTime tm;<br>   TimeToStruct(date,tm);<br>   return(tm.min);<br>  }<br>``` | [TimeMinute](https://docs.mql4.com/dateandtime/timeminute "https://docs.mql4.com/dateandtime/timeminute")<br>Returns the minute for the specified time.<br>[TimeToStruct](https://www.mql5.com/en/docs/dateandtime/timetostruct), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |
| ```<br>int TimeMonth(datetime time)<br>``` | ```<br>int TimeMonthMQL4(datetime date)<br>  {<br>   MqlDateTime tm;<br>   TimeToStruct(date,tm);<br>   return(tm.mon);<br>  }<br>``` | [TimeMonth](https://docs.mql4.com/dateandtime/timemonth "https://docs.mql4.com/dateandtime/timemonth")<br>Returns the month number for the specified time.<br>[TimeToStruct](https://www.mql5.com/en/docs/dateandtime/timetostruct), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |
| ```<br>int TimeSeconds(datetime time)<br>``` | ```<br>int TimeSecondsMQL4(datetime date)<br>  {<br>   MqlDateTime tm;<br>   TimeToStruct(date,tm);<br>   return(tm.sec);<br>  }<br>``` | [TimeSeconds](https://docs.mql4.com/dateandtime/timeseconds "https://docs.mql4.com/dateandtime/timeseconds")<br>Returns the amount of seconds elapsed from the beginning of the minute for the specified time.<br>[TimeToStruct](https://www.mql5.com/en/docs/dateandtime/timetostruct), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |
| ```<br>int TimeYear(datetime time)<br>``` | ```<br>int TimeYearMQL4(datetime date)<br>  {<br>   MqlDateTime tm;<br>   TimeToStruct(date,tm);<br>   return(tm.year);<br>  }<br>``` | [TimeYear](https://docs.mql4.com/dateandtime/timeyear "https://docs.mql4.com/dateandtime/timeyear")<br>Returns year for the specified date. The returned value can be within the range of 1970 to 2037.<br>[TimeToStruct](https://www.mql5.com/en/docs/dateandtime/timetostruct), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |
| ```<br>int Year()<br>``` | ```<br>int YearMQL4()<br>  {<br>   MqlDateTime tm;<br>   TimeCurrent(tm);<br>   return(tm.year);<br>  }<br>``` | [Year](https://docs.mql4.com/dateandtime/year "https://docs.mql4.com/dateandtime/year")<br>Returns the current year, i.e., the year of the last known server time.<br>[TimeCurrent](https://www.mql5.com/en/docs/dateandtime/timecurrent), [MqlDateTime](https://www.mql5.com/en/docs/constants/structures/mqldatetime) |

### 12\. File Functions

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>void FileClose(int handle)<br>``` | ```<br>void FileClose(int file_handle)<br>``` | [FileClose](https://docs.mql4.com/files/fileclose "https://docs.mql4.com/files/fileclose")<br>Closes file previously opened by the FileOpen() function.<br>[FileClose](https://www.mql5.com/en/docs/files/fileclose) |
| ```<br>void FileDelete(string filename)<br>``` | ```<br>bool FileDelete(string file_name<br>                int common_flag=0)<br>``` | [FileDelete](https://docs.mql4.com/files/filedelete "https://docs.mql4.com/files/filedelete")<br>Removes specified file name.<br>[FileDelete](https://www.mql5.com/en/docs/files/filedelete) |
| ```<br>void FileFlush(int handle)<br>``` | ```<br>void FileFlush(int file_handle)<br>``` | [FileFlush](https://docs.mql4.com/files/fileflush "https://docs.mql4.com/files/fileflush")<br>Flushes all data stored in the file buffer to the disk.<br>[FileFlush](https://www.mql5.com/en/docs/files/fileflush) |
| ```<br>bool FileIsEnding(int handle)<br>``` | ```<br>bool FileIsEnding(int file_handle)<br>``` | [FileIsEnding](https://docs.mql4.com/files/fileisending "https://docs.mql4.com/files/fileisending")<br>Returns logical true if file pointer is at the end of the file, otherwise returns false.<br>[FileIsEnding](https://www.mql5.com/en/docs/files/fileisending) |
| ```<br>bool FileIsLineEnding(int handle)<br>``` | ```<br>bool FileIsLineEnding(int file_handle)<br>``` | [FileIsLineEnding](https://docs.mql4.com/files/fileislineending "https://docs.mql4.com/files/fileislineending")<br>For CSV file returns logical true if file pointer is at the end of the line, otherwise returns false.<br>[FileIsLineEnding](https://www.mql5.com/en/docs/files/fileislineending) |
| ```<br>int FileOpen(string filename,<br>             int mode,<br>             int delimiter=';')<br>``` | ```<br>int FileOpen(string ile_name,<br>             int pen_flags,<br>             short delimiter='\t'<br>             uint codepage=CP_ACP)<br>``` | [FileOpen](https://docs.mql4.com/files/fileopen "https://docs.mql4.com/files/fileopen")<br>Opens file for input and/or output. Returns a file handle for the opened file or -1 (if the function fails).<br>[FileOpen](https://www.mql5.com/en/docs/files/fileopen) |
| ```<br>int FileOpenHistory(string filename,<br>                    int mode,<br>                    int delimiter=';')<br>``` | - | [FileOpenHistory](https://docs.mql4.com/files/fileopenhistory "https://docs.mql4.com/files/fileopenhistory")<br>Opens file in the current history directory (terminal\_directory\\history\\server\_name) or in its subfolders. Returns the file handle for the opened file. If the function fails, the returned value is -1. |
| ```<br>int FileReadArray(int handle,<br>                  object &array[],<br>                  int start,<br>                  int count)<br>``` | ```<br>uint FileReadArray(int file_handle,<br>                   void array[],<br>                   int start_item=0,<br>                   int items_count=WHOLE_ARRAY)<br>``` | [FileReadArray](https://docs.mql4.com/files/filereadarray "https://docs.mql4.com/files/filereadarray")<br>Reads the specified amount of elements from the binary file into array.<br>[FileReadArray](https://www.mql5.com/en/docs/files/filereadarray) |
| ```<br>double FileReadDouble(int handle,<br>                      int size=DOUBLE_VALUE)<br>``` | ```<br>double FileReadDoubleMQL4(int handle,<br>                          int size=DOUBLE_VALUE)<br>  {<br>   return(FileReadDouble(handle));<br>  }<br>``` | [FileReadDouble](https://docs.mql4.com/files/filereaddouble "https://docs.mql4.com/files/filereaddouble")<br>Reads the double-precision number with floating point from the current binary file position.<br>[FileReadDouble](https://www.mql5.com/en/docs/files/filereaddouble) |
| ```<br>int FileReadInteger(int handle,<br>                    int size=LONG_VALUE)<br>``` | ```<br>int FileReadInteger(int file_handle,<br>                    int size=INT_VALUE)<br>``` | [FileReadInteger](https://docs.mql4.com/files/filereadinteger "https://docs.mql4.com/files/filereadinteger")<br>The function reads the integer from the current binary file position.<br>[FileReadInteger](https://www.mql5.com/en/docs/files/filereadinteger) |
| ```<br>double FileReadNumber(int handle)<br>``` | ```<br>double FileReadNumber(int file_handle)<br>``` | [FileReadNumber](https://docs.mql4.com/files/filereadnumber "https://docs.mql4.com/files/filereadnumber")<br>Read the number from the current file position before the delimiter. Only for CSV files.<br>[FileReadNumber](https://www.mql5.com/en/docs/files/filereadnumber) |
| ```<br>string FileReadString(int handle,<br>                      int length=0)<br>``` | ```<br>string FileReadString(int file_handle,<br>                      int size=-1)<br>``` | [FileReadString](https://docs.mql4.com/files/filereadstring "https://docs.mql4.com/files/filereadstring")<br>Функция читает строку с текущей позиции файла.<br>[FileReadString](https://www.mql5.com/en/docs/files/filereadstring) |
| ```<br>bool FileSeek(int handle,<br>              int offset,<br>              int origin)<br>``` | ```<br>bool FileSeekMQL4(long handle,<br>                  int offset,<br>                  ENUM_FILE_POSITION origin)<br>  {<br>   FileSeek(handle,offset,origin);<br>   return(true);<br>  }<br>``` | [FileSeek](https://docs.mql4.com/files/fileseek "https://docs.mql4.com/files/fileseek")<br>The function moves the file pointer to a new position that is an offset, in bytes, from the beginning, the end or the current file position.<br>[FileSeek](https://www.mql5.com/en/docs/files/fileseek) |
| ```<br>int FileSize(int handle)<br>``` | ```<br>ulong FileSize(int file_handle)<br>``` | [FileSize](https://docs.mql4.com/files/filesize "https://docs.mql4.com/files/filesize")<br>The function returns file size in bytes.<br>[FileSize](https://www.mql5.com/en/docs/files/filesize) |
| ```<br>int FileTell(int handle)<br>``` | ```<br>ulong FileTell(int file_handle)<br>``` | [FileTell](https://docs.mql4.com/files/filetell "https://docs.mql4.com/files/filetell")<br>Returns the current position of the file pointer.<br>[FileTell](https://www.mql5.com/en/docs/files/filetell) |
| ```<br>int FileWrite(int handle,...)<br>``` | ```<br>uint FileWrite(int file_handle,...)<br>``` | [FileWrite](https://docs.mql4.com/files/filewrite "https://docs.mql4.com/files/filewrite")<br>The function is intended for writing of data into a CSV file, delimiter being inserted automatically.<br>[FileWrite](https://www.mql5.com/en/docs/files/filewrite) |
| ```<br>int FileWriteArray(int handle,<br>                   object array[],<br>                   int start,<br>                   int count)<br>``` | ```<br>int FileWriteArray(int file_handle,<br>                   void array[],<br>                   int start_item=0,<br>                   int items_count=WHOLE_ARRAY)<br>``` | [FileWriteArray](https://docs.mql4.com/files/filewritearray "https://docs.mql4.com/files/filewritearray")<br>The function writes the array to a binary file.<br>[FileWriteArray](https://www.mql5.com/en/docs/files/filewritearray) |
| ```<br>int FileWriteDouble(int handle,<br>                    double value,<br>                    int size=DOUBLE_VALUE)<br>``` | ```<br>uint FileWriteDouble(int file_handle,<br>                     double dvalue)<br>``` | [FileWriteDouble](https://docs.mql4.com/files/filewritedouble "https://docs.mql4.com/files/filewritedouble")<br>The function writes a double value with floating point to a binary file.<br>[FileWriteDouble](https://www.mql5.com/en/docs/files/filewritedouble) |
| ```<br>int FileWriteInteger(int handle,<br>                     int value,<br>                     int size=LONG_VALUE)<br>``` | ```<br>uint FileWriteInteger(int file_handle,<br>                      int ivalue,<br>                      int size=INT_VALUE)<br>``` | [FileWriteInteger](https://docs.mql4.com/files/filewriteinteger "https://docs.mql4.com/files/filewriteinteger")<br>The function writes the integer value to a binary file.<br>[FileWriteInteger](https://www.mql5.com/en/docs/files/filewriteinteger) |
| ```<br>int FileWriteString(int handle,<br>                    string value,<br>                    int size)<br>``` | ```<br>uint FileWriteString(int file_handle,<br>                     string svalue,<br>                     int size=-1)<br>``` | [FileWriteString](https://docs.mql4.com/files/filewritestring "https://docs.mql4.com/files/filewritestring")<br>The function writes the string to a binary file from the current file position.<br>[FileWriteString](https://www.mql5.com/en/docs/files/filewritestring) |

### 13\. Global Variables

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>bool GlobalVariableCheck(string name)<br>``` | ```<br>bool GlobalVariableCheck(string name)<br>``` | [GlobalVariableCheck](https://docs.mql4.com/globals/globalvariablecheck "https://docs.mql4.com/globals/globalvariablecheck")<br>Returns TRUE if the global variable exists, otherwise, returns FALSE.<br>[GlobalVariableCheck](https://www.mql5.com/en/docs/globals/globalvariablecheck) |
| ```<br>bool GlobalVariableDel(string name)<br>``` | ```<br>bool GlobalVariableDel(string name)<br>``` | [GlobalVariableDel](https://docs.mql4.com/globals/globalvariabledel "https://docs.mql4.com/globals/globalvariabledel")<br>Deletes the global variable.<br>[GlobalVariableDel](https://www.mql5.com/en/docs/globals/globalvariabledel) |
| ```<br>double GlobalVariableGet(string name)<br>``` | ```<br>double GlobalVariableGet(string name)<br>``` | [GlobalVariableGet](https://docs.mql4.com/globals/globalvariableget "https://docs.mql4.com/globals/globalvariableget")<br>Returns the value of an existing global variable or 0 if an error occurs.<br>[GlobalVariableGet](https://www.mql5.com/en/docs/globals/globalvariableget) |
| ```<br>string GlobalVariableName(int index)<br>``` | ```<br>string GlobalVariableName(int index)<br>``` | [GlobalVariableName](https://docs.mql4.com/globals/globalvariablename "https://docs.mql4.com/globals/globalvariablename")<br>The function returns the name of a global variable by its index in the list of global variables.<br>[GlobalVariableName](https://www.mql5.com/en/docs/globals/globalvariablename) |
| ```<br>datetime GlobalVariableSet(string name,<br>                           double value)<br>``` | ```<br>datetime GlobalVariableSet(string name,<br>                           double value)<br>``` | [GlobalVariableSet](https://docs.mql4.com/globals/globalvariableset "https://docs.mql4.com/globals/globalvariableset")<br>Sets a new value of the global variable. If it does not exist, the system creates a new global variable.<br>[GlobalVariableSet](https://www.mql5.com/en/docs/globals/globalvariableset) |
| ```<br>bool GlobalVariableSetOnCondition(string name,<br>                                  double value,<br>                                  double check_value)<br>``` | ```<br>bool GlobalVariableSetOnCondition(string name,<br>                                  double value,<br>                                  double check_value)<br>``` | [GlobalVariableSetOnCondition](https://docs.mql4.com/globals/globalvariablesetoncondition "https://docs.mql4.com/globals/globalvariablesetoncondition")<br>Sets the new value of the existing global variable if the current value equals to the third parameter check\_value.<br>[GlobalVariableSetOnCondition](https://www.mql5.com/en/docs/globals/globalvariablesetoncondition) |
| ```<br>int GlobalVariablesDeleteAll(string prefix_name=NULL)<br>``` | ```<br>int GlobalVariablesDeleteAll(string prefix_name=NULL<br>                             datetime limit_data=0)<br>``` | [GlobalVariablesDeleteAll](https://docs.mql4.com/globals/globalvariablesdeleteall "https://docs.mql4.com/globals/globalvariablesdeleteall")<br>Deletes global variables.<br>[GlobalVariablesDeleteAll](https://www.mql5.com/en/docs/globals/globalvariablesdeleteall) |
| ```<br>int GlobalVariablesTotal()<br>``` | ```<br>int GlobalVariablesTotal()<br>``` | [GlobalVariablesTotal](https://docs.mql4.com/globals/globalvariablestotal "https://docs.mql4.com/globals/globalvariablestotal")<br>The function returns the total count of global variables.<br>[GlobalVariablesTotal](https://www.mql5.com/en/docs/globals/globalvariablestotal) |

### 14\. Mathematical Functions

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>double MathAbs(double value)<br>``` | ```<br>double MathAbs(double value)<br>``` | [MathAbs](https://docs.mql4.com/math/mathabs "https://docs.mql4.com/math/mathabs")<br>Returns the absolute value (modulus) of the specified numeric value.<br>[MathAbs](https://www.mql5.com/en/docs/math/mathabs) |
| ```<br>double MathArccos(double x)<br>``` | ```<br>double MathArccos(double val)<br>``` | [MathArccos](https://docs.mql4.com/math/matharccos "https://docs.mql4.com/math/matharccos")<br>The MathArccos function returns the arccosine of x within the range 0 to Pi (in radians).<br>[MathArccos](https://www.mql5.com/en/docs/math/matharccos) |
| ```<br>double MathArcsin(double x)<br>``` | ```<br>double MathArcsin(double val)<br>``` | [MathArcsin](https://docs.mql4.com/math/matharcsin "https://docs.mql4.com/math/matharcsin")<br>The MathArcsin function returns the arcsine of x in the range -Pi/2 to Pi/2 radians.<br>[MathArcsin](https://www.mql5.com/en/docs/math/matharcsin) |
| ```<br>double MathArctan(double x)<br>``` | ```<br>double MathArctan(double value)<br>``` | [MathArctan](https://docs.mql4.com/math/matharctan "https://docs.mql4.com/math/matharctan")<br>The MathArctan returns the arctangent of x.<br>[MathArctan](https://www.mql5.com/en/docs/math/matharctan) |
| ```<br>double MathCeil(double x)<br>``` | ```<br>double MathCeil(double val)<br>``` | [MathCeil](https://docs.mql4.com/math/mathceil "https://docs.mql4.com/math/mathceil")<br>The MathCeil function returns a numeric value representing the smallest integer that exceeds or equals to x.<br>[MathCeil](https://www.mql5.com/en/docs/math/mathceil) |
| ```<br>double MathCos(double value)<br>``` | ```<br>double MathCos(double value)<br>``` | [MathCos](https://docs.mql4.com/math/mathcos "https://docs.mql4.com/math/mathcos")<br>Returns the cosine of the specified angle.<br>[MathCos](https://www.mql5.com/en/docs/math/mathcos) |
| ```<br>double MathExp(double d)<br>``` | ```<br>double MathExp(double value)<br>``` | [MathExp](https://docs.mql4.com/math/mathexp "https://docs.mql4.com/math/mathexp")<br>Returns the value of **e** raised to the power of d.<br>[MathExp](https://www.mql5.com/en/docs/math/mathexp) |
| ```<br>double MathFloor(double x)<br>``` | ```<br>double MathFloor(double val)<br>``` | [MathFloor](https://docs.mql4.com/math/mathfloor "https://docs.mql4.com/math/mathfloor")<br>The MathFloor function returns a numeric value representing the largest integer that is less than or equal to x.<br>[MathFloor](https://www.mql5.com/en/docs/math/mathfloor) |
| ```<br>double MathLog(double x)<br>``` | ```<br>double MathLog(double val)<br>``` | [MathLog](https://docs.mql4.com/math/mathlog "https://docs.mql4.com/math/mathlog")<br>The MathLog function returns the natural logarithm of x if successful.<br>[MathLog](https://www.mql5.com/en/docs/math/mathlog) |
| ```<br>double MathMax(double value1,<br>               double value2)<br>``` | ```<br>double MathMax(double value1,<br>               double value2)<br>``` | [MathMax](https://docs.mql4.com/math/mathmax "https://docs.mql4.com/math/mathmax")<br>Returns the maximum value of two numeric values.<br>[MathMax](https://www.mql5.com/en/docs/math/mathmax) |
| ```<br>double MathMin(double value1,<br>               double value2)<br>``` | ```<br>double MathMin(double value1,<br>               double value2)<br>``` | [MathMin](https://docs.mql4.com/math/mathmin "https://docs.mql4.com/math/mathmin")<br>Returns the minimum value of two numeric values.<br>[MathMin](https://www.mql5.com/en/docs/math/mathmin) |
| ```<br>double MathMod(double value1,<br>               double value2)<br>``` | ```<br>double MathMod(double value1,<br>               double value2)<br>``` | [MathMod](https://docs.mql4.com/math/mathmod "https://docs.mql4.com/math/mathmod")<br>The function returns the floating-point remainder of division of two numbers.<br>[MathMod](https://www.mql5.com/en/docs/math/mathmod) |
| ```<br>double MathPow(double base,<br>               double exponent)<br>``` | ```<br>double MathPow(double base,<br>               double exponent)<br>``` | [MathPow](https://docs.mql4.com/math/mathpow "https://docs.mql4.com/math/mathpow")<br>Returns the value of the base expression raised to the specified power (exponent value).<br>[MathPow](https://www.mql5.com/en/docs/math/mathpow) |
| ```<br>int MathRand()<br>``` | ```<br>int MathRand()<br>``` | [MathRand](https://docs.mql4.com/math/mathrand "https://docs.mql4.com/math/mathrand")<br>The MathRand function returns a pseudorandom integer within the range of 0 to 32767.<br>[MathRand](https://www.mql5.com/en/docs/math/mathrand) |
| ```<br>double MathRound(double value)<br>``` | ```<br>double MathRound(double value)<br>``` | [MathRound](https://docs.mql4.com/math/mathround "https://docs.mql4.com/math/mathround")<br>Returns value rounded to the nearest integer of the specified numeric value.<br>[MathRound](https://www.mql5.com/en/docs/math/mathround) |
| ```<br>double MathSin(double value)<br>``` | ```<br>double MathSin(double value)<br>``` | [MathSin](https://docs.mql4.com/math/mathsin "https://docs.mql4.com/math/mathsin")<br>Returns the sine of the specified angle.<br>[MathSin](https://www.mql5.com/en/docs/math/mathsin) |
| ```<br>double MathSqrt(double x)<br>``` | ```<br>double MathSqrt(double value)<br>``` | [MathSqrt](https://docs.mql4.com/math/mathsqrt "https://docs.mql4.com/math/mathsqrt")<br>The MathSqrt function returns the square root of x.<br>[MathSqrt](https://www.mql5.com/en/docs/math/mathsqrt) |
| ```<br>void MathSrand(int seed)<br>``` | ```<br>void MathSrand(int seed)<br>``` | [MathSrand](https://docs.mql4.com/math/mathsrand "https://docs.mql4.com/math/mathsrand")<br>The MathSrand() function sets the starting point for generating a series of pseudorandom integers.<br>[MathSrand](https://www.mql5.com/en/docs/math/mathsrand) |
| ```<br>double MathTan(double x)<br>``` | ```<br>double MathTan(double rad)<br>``` | [MathTan](https://docs.mql4.com/math/mathtan "https://docs.mql4.com/math/mathtan")<br>MathTan returns the tangent of x.<br>[MathTan](https://www.mql5.com/en/docs/math/mathtan) |

### 15\. Object Functions

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>bool ObjectCreate(string name,<br>                  int type,<br>                  int window,<br>                  datetime time1,<br>                  double price1,<br>                  datetime time2=0,<br>                  double price2=0,<br>                  datetime time3=0,<br>                  double price3=0)<br>``` | ```<br>bool ObjectCreateMQL4(string name,<br>                      ENUM_OBJECT type,<br>                      int window,<br>                      datetime time1,<br>                      double price1,<br>                      datetime time2=0,<br>                      double price2=0,<br>                      datetime time3=0,<br>                      double price3=0)<br>  {<br>   return(ObjectCreate(0,name,type,window,<br>          time1,price1,time2,price2,time3,price3));<br>  }<br>``` | [ObjectCreate](https://docs.mql4.com/objects/objectcreate "https://docs.mql4.com/objects/objectcreate")<br>Creation of an object with the specified name, type and initial coordinates in the specified window.<br>[ObjectCreate](https://www.mql5.com/en/docs/objects/objectcreate) |
| ```<br>bool ObjectDelete(string name)<br>``` | ```<br>bool ObjectDeleteMQL4(string name)<br>  {<br>   return(ObjectDelete(0,name));<br>  }<br>``` | [ObjectDelete](https://docs.mql4.com/objects/objectdelete "https://docs.mql4.com/objects/objectdelete")<br>Deletes object having the specified name.<br>[ObjectDelete](https://www.mql5.com/en/docs/objects/objectdelete) |
| ```<br>string ObjectDescription(string name)<br>``` | ```<br>string ObjectDescriptionMQL4(string name)<br>  {<br>   return(ObjectGetString(0,name,OBJPROP_TEXT));<br>  }<br>``` | [ObjectDescription](https://docs.mql4.com/objects/objectdescription "https://docs.mql4.com/objects/objectdescription")<br>Return object description.<br>[ObjectGetString](https://www.mql5.com/en/docs/objects/objectgetstring) |
| ```<br>int ObjectFind(string name)<br>``` | ```<br>int ObjectFindMQL4(string name)<br>  {<br>   return(ObjectFind(0,name));<br>  }<br>``` | [ObjectFind](https://docs.mql4.com/objects/objectfind "https://docs.mql4.com/objects/objectfind")<br>Search for an object having the specified name.<br>[ObjectFind](https://www.mql5.com/en/docs/objects/objectfind) |
| ```<br>double ObjectGet(string name,<br>                 int prop_id)<br>``` | ```<br>double ObjectGetMQL4(string name,<br>                     int index)<br>  {<br>   switch(index)<br>     {<br>      case OBJPROP_TIME1:<br>         return(ObjectGetInteger(0,name,OBJPROP_TIME));<br>      case OBJPROP_PRICE1:<br>         return(ObjectGetDouble(0,name,OBJPROP_PRICE));<br>      case OBJPROP_TIME2:<br>         return(ObjectGetInteger(0,name,OBJPROP_TIME,1));<br>      case OBJPROP_PRICE2:<br>         return(ObjectGetDouble(0,name,OBJPROP_PRICE,1));<br>      case OBJPROP_TIME3:<br>         return(ObjectGetInteger(0,name,OBJPROP_TIME,2));<br>      case OBJPROP_PRICE3:<br>         return(ObjectGetDouble(0,name,OBJPROP_PRICE,2));<br>      case OBJPROP_COLOR:<br>         return(ObjectGetInteger(0,name,OBJPROP_COLOR));<br>      case OBJPROP_STYLE:<br>         return(ObjectGetInteger(0,name,OBJPROP_STYLE));<br>      case OBJPROP_WIDTH:<br>         return(ObjectGetInteger(0,name,OBJPROP_WIDTH));<br>      case OBJPROP_BACK:<br>         return(ObjectGetInteger(0,name,OBJPROP_WIDTH));<br>      case OBJPROP_RAY:<br>         return(ObjectGetInteger(0,name,OBJPROP_RAY_RIGHT));<br>      case OBJPROP_ELLIPSE:<br>         return(ObjectGetInteger(0,name,OBJPROP_ELLIPSE));<br>      case OBJPROP_SCALE:<br>         return(ObjectGetDouble(0,name,OBJPROP_SCALE));<br>      case OBJPROP_ANGLE:<br>         return(ObjectGetDouble(0,name,OBJPROP_ANGLE));<br>      case OBJPROP_ARROWCODE:<br>         return(ObjectGetInteger(0,name,OBJPROP_ARROWCODE));<br>      case OBJPROP_TIMEFRAMES:<br>         return(ObjectGetInteger(0,name,OBJPROP_TIMEFRAMES));<br>      case OBJPROP_DEVIATION:<br>         return(ObjectGetDouble(0,name,OBJPROP_DEVIATION));<br>      case OBJPROP_FONTSIZE:<br>         return(ObjectGetInteger(0,name,OBJPROP_FONTSIZE));<br>      case OBJPROP_CORNER:<br>         return(ObjectGetInteger(0,name,OBJPROP_CORNER));<br>      case OBJPROP_XDISTANCE:<br>         return(ObjectGetInteger(0,name,OBJPROP_XDISTANCE));<br>      case OBJPROP_YDISTANCE:<br>         return(ObjectGetInteger(0,name,OBJPROP_YDISTANCE));<br>      case OBJPROP_FIBOLEVELS:<br>         return(ObjectGetInteger(0,name,OBJPROP_LEVELS));<br>      case OBJPROP_LEVELCOLOR:<br>         return(ObjectGetInteger(0,name,OBJPROP_LEVELCOLOR));<br>      case OBJPROP_LEVELSTYLE:<br>         return(ObjectGetInteger(0,name,OBJPROP_LEVELSTYLE));<br>      case OBJPROP_LEVELWIDTH:<br>         return(ObjectGetInteger(0,name,OBJPROP_LEVELWIDTH));<br>     }<br>  }<br>``` | [ObjectGet](https://docs.mql4.com/objects/objectget "https://docs.mql4.com/objects/objectget")<br>The function returns the value of the specified object property.<br>[ObjectGetInteger](https://www.mql5.com/en/docs/objects/objectgetinteger), [ObjectGetDouble](https://www.mql5.com/en/docs/objects/objectgetdouble) |
| ```<br>string ObjectGetFiboDescription(string name,<br>                                int index)<br>``` | ```<br>string ObjectGetFiboDescriptionMQL4(string name,<br>                                    int index)<br>  {<br>   return(ObjectGetString(0,name,OBJPROP_LEVELTEXT,index));<br>  }<br>``` | [ObjectGetFiboDescription](https://docs.mql4.com/objects/objectgetfibodescription "https://docs.mql4.com/objects/objectgetfibodescription")<br>The function returns the level description of a Fibonacci object.<br>[ObjectGetString](https://www.mql5.com/en/docs/objects/objectgetstring) |
| ```<br>int ObjectGetShiftByValue(string name,<br>                          double value)<br>``` | ```<br>int ObjectGetShiftByValueMQL4(string name,<br>                              double value)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(PERIOD_CURRENT);<br>   datetime Arr[];<br>   int shift;<br>   MqlRates mql4[];<br>   if(ObjectGetTimeByValue(0,name,value)<0) return(-1);<br>   CopyRates(NULL,timeframe,0,1,mql4);<br>   if(CopyTime(NULL,timeframe,mql4[0].time,<br>      ObjectGetTimeByValue(0,name,value),Arr)>0)<br>      return(ArraySize(Arr)-1);<br>   else return(-1);<br>  }<br>``` | [ObjectGetShiftByValue](https://docs.mql4.com/objects/objectgetshiftbyvalue "https://docs.mql4.com/objects/objectgetshiftbyvalue")<br>The function calculates and returns bar index (shift related to the current bar) for the given price.<br>[MqlRates](https://www.mql5.com/en/docs/constants/structures/mqlrates), [ObjectGetTimeByValue](https://www.mql5.com/en/docs/objects/objectgettimebyvalue), [CopyRates](https://www.mql5.com/en/docs/series/copyrates), [CopyTime](https://www.mql5.com/en/docs/series/copytime), [ArraySize](https://www.mql5.com/en/docs/array/arraysize) |
| ```<br>double ObjectGetValueByShift(string name,<br>                             int shift)<br>``` | ```<br>double ObjectGetValueByShiftMQL4(string name,<br>                                 int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(PERIOD_CURRENT);<br>   MqlRates mql4[];<br>   CopyRates(NULL,timeframe,shift,1,mql4);<br>   return(ObjectGetValueByTime(0,name,mql4[0].time,0));<br>  }<br>``` | [ObjectGetValueByShift](https://docs.mql4.com/objects/objectgetvaluebyshift "https://docs.mql4.com/objects/objectgetvaluebyshift")<br>The function calculates and returns the price value for the specified bar (shift related to the current bar).<br>[MqlRates](https://www.mql5.com/en/docs/constants/structures/mqlrates), [CopyRates](https://www.mql5.com/en/docs/series/copyrates), [ObjectGetValueByTime](https://www.mql5.com/en/docs/objects/objectgetvaluebytime) |
| ```<br>bool ObjectMove(string name,<br>                int point,<br>                datetime time1,<br>                double price1)<br>``` | ```<br>bool ObjectMoveMQL4(string name,<br>                    int point,<br>                    datetime time1,<br>                    double price1)<br>  {<br>   return(ObjectMove(0,name,point,time1,price1));<br>  }<br>``` | [ObjectMove](https://docs.mql4.com/objects/objectmove "https://docs.mql4.com/objects/objectmove")<br>The function moves an object coordinate in the chart. Objects can have from one to three coordinates depending on their types.<br>[ObjectMove](https://www.mql5.com/en/docs/objects/objectmove) |
| ```<br>string ObjectName(int index)<br>``` | ```<br>string ObjectNameMQL4(int index)<br>  {<br>   return(ObjectName(0,index));<br>  }<br>``` | [ObjectName](https://docs.mql4.com/objects/objectname "https://docs.mql4.com/objects/objectname")<br>The function returns the object name by its index in the objects list.<br>[ObjectName](https://www.mql5.com/en/docs/objects/objectname) |
| ```<br>int ObjectsDeleteAll(int window=EMPTY,<br>                     int type=EMPTY)<br>``` | ```<br>int ObjectsDeleteAllMQL4(int window=EMPTY,<br>                         int type=EMPTY)<br>  {<br>   return(ObjectsDeleteAll(0,window,type));<br>  }<br>``` | [ObjectsDeleteAll](https://docs.mql4.com/objects/objectsdeleteall "https://docs.mql4.com/objects/objectsdeleteall")<br>Removes all objects of the specified type and in the specified sub-window of the chart.<br>[ObjectsDeleteAll](https://www.mql5.com/en/docs/objects/objectdeleteall) |
| ```<br>bool ObjectSet(string name,<br>               int prop_id,<br>               double value)<br>``` | ```<br>bool ObjectSetMQL4(string name,<br>                   int index,<br>                   double value)<br>  {<br>   switch(index)<br>     {<br>      case OBJPROP_TIME1:<br>         ObjectSetInteger(0,name,OBJPROP_TIME,(int)value);return(true);<br>      case OBJPROP_PRICE1:<br>         ObjectSetDouble(0,name,OBJPROP_PRICE,value);return(true);<br>      case OBJPROP_TIME2:<br>         ObjectSetInteger(0,name,OBJPROP_TIME,1,(int)value);return(true);<br>      case OBJPROP_PRICE2:<br>         ObjectSetDouble(0,name,OBJPROP_PRICE,1,value);return(true);<br>      case OBJPROP_TIME3:<br>         ObjectSetInteger(0,name,OBJPROP_TIME,2,(int)value);return(true);<br>      case OBJPROP_PRICE3:<br>         ObjectSetDouble(0,name,OBJPROP_PRICE,2,value);return(true);<br>      case OBJPROP_COLOR:<br>         ObjectSetInteger(0,name,OBJPROP_COLOR,(int)value);return(true);<br>      case OBJPROP_STYLE:<br>         ObjectSetInteger(0,name,OBJPROP_STYLE,(int)value);return(true);<br>      case OBJPROP_WIDTH:<br>         ObjectSetInteger(0,name,OBJPROP_WIDTH,(int)value);return(true);<br>      case OBJPROP_BACK:<br>         ObjectSetInteger(0,name,OBJPROP_BACK,(int)value);return(true);<br>      case OBJPROP_RAY:<br>         ObjectSetInteger(0,name,OBJPROP_RAY_RIGHT,(int)value);return(true);<br>      case OBJPROP_ELLIPSE:<br>         ObjectSetInteger(0,name,OBJPROP_ELLIPSE,(int)value);return(true);<br>      case OBJPROP_SCALE:<br>         ObjectSetDouble(0,name,OBJPROP_SCALE,value);return(true);<br>      case OBJPROP_ANGLE:<br>         ObjectSetDouble(0,name,OBJPROP_ANGLE,value);return(true);<br>      case OBJPROP_ARROWCODE:<br>         ObjectSetInteger(0,name,OBJPROP_ARROWCODE,(int)value);return(true);<br>      case OBJPROP_TIMEFRAMES:<br>         ObjectSetInteger(0,name,OBJPROP_TIMEFRAMES,(int)value);return(true);<br>      case OBJPROP_DEVIATION:<br>         ObjectSetDouble(0,name,OBJPROP_DEVIATION,value);return(true);<br>      case OBJPROP_FONTSIZE:<br>         ObjectSetInteger(0,name,OBJPROP_FONTSIZE,(int)value);return(true);<br>      case OBJPROP_CORNER:<br>         ObjectSetInteger(0,name,OBJPROP_CORNER,(int)value);return(true);<br>      case OBJPROP_XDISTANCE:<br>         ObjectSetInteger(0,name,OBJPROP_XDISTANCE,(int)value);return(true);<br>      case OBJPROP_YDISTANCE:<br>         ObjectSetInteger(0,name,OBJPROP_YDISTANCE,(int)value);return(true);<br>      case OBJPROP_FIBOLEVELS:<br>         ObjectSetInteger(0,name,OBJPROP_LEVELS,(int)value);return(true);<br>      case OBJPROP_LEVELCOLOR:<br>         ObjectSetInteger(0,name,OBJPROP_LEVELCOLOR,(int)value);return(true);<br>      case OBJPROP_LEVELSTYLE:<br>         ObjectSetInteger(0,name,OBJPROP_LEVELSTYLE,(int)value);return(true);<br>      case OBJPROP_LEVELWIDTH:<br>         ObjectSetInteger(0,name,OBJPROP_LEVELWIDTH,(int)value);return(true);<br>      default: return(false);<br>     }<br>   return(false);<br>  }<br>``` | [ObjectSet](https://docs.mql4.com/objects/objectset "https://docs.mql4.com/objects/objectset")<br>Changes the value of the specified object property.<br>[ObjectSetInteger](https://www.mql5.com/en/docs/objects/objectsetinteger), [ObjectSetDouble](https://www.mql5.com/en/docs/objects/objectsetdouble) |
| ```<br>bool ObjectSetFiboDescription(string name,<br>                              int index,<br>                              string text)<br>``` | ```<br>bool ObjectSetFiboDescriptionMQL4(string name,<br>                                  int index,<br>                                  string text)<br>  {<br>   return(ObjectSetString(0,name,OBJPROP_LEVELTEXT,index,text));<br>  }<br>``` | [ObjectSetFiboDescription](https://docs.mql4.com/objects/objectsetfibodescription "https://docs.mql4.com/objects/objectsetfibodescription")<br>The function assigns a new description to a level of a Fibonacci object.<br>[ObjectSetString](https://www.mql5.com/en/docs/objects/objectsetstring) |
| ```<br>bool ObjectSetText(string name,<br>                   string text,<br>                   int font_size,<br>                   string font_name=NULL,<br>                   color text_color=CLR_NONE)<br>``` | ```<br>bool ObjectSetTextMQL4(string name,<br>                       string text,<br>                       int font_size,<br>                       string font="",<br>                       color text_color=CLR_NONE)<br>  {<br>   int tmpObjType=(int)ObjectGetInteger(0,name,OBJPROP_TYPE);<br>   if(tmpObjType!=OBJ_LABEL && tmpObjType!=OBJ_TEXT) return(false);<br>   if(StringLen(text)>0 && font_size>0)<br>     {<br>      if(ObjectSetString(0,name,OBJPROP_TEXT,text)==true<br>         && ObjectSetInteger(0,name,OBJPROP_FONTSIZE,font_size)==true)<br>        {<br>         if((StringLen(font)>0)<br>            && ObjectSetString(0,name,OBJPROP_FONT,font)==false)<br>            return(false);<br>         if(text_color>-1<br>            && ObjectSetInteger(0,name,OBJPROP_COLOR,text_color)==false)<br>            return(false);<br>         return(true);<br>        }<br>      return(false);<br>     }<br>   return(false);<br>  }<br>``` | [ObjectSetText](https://docs.mql4.com/objects/objectsettext "https://docs.mql4.com/objects/objectsettext")<br>Changes the object description.<br>[ObjectGetInteger](https://www.mql5.com/en/docs/objects/objectgetinteger), [ObjectSetString](https://www.mql5.com/en/docs/objects/objectsetstring), [ObjectSetInteger](https://www.mql5.com/en/docs/objects/objectsetinteger) [StringLen](https://www.mql5.com/en/docs/strings/stringlen) |
| ```<br>int ObjectsTotal(int type=EMPTY)<br>``` | ```<br>int ObjectsTotalMQL4(int type=EMPTY,<br>                     int window=-1)<br>  {<br>   return(ObjectsTotal(0,window,type));<br>  }<br>``` | [ObjectsTotal](https://docs.mql4.com/objects/objectstotal "https://docs.mql4.com/objects/objectstotal")<br>Returns total amount of objects of the specified type in the chart.<br>[ObjectsTotal](https://www.mql5.com/en/docs/objects/objectstotal) |
| ```<br>int ObjectType(string name)<br>``` | ```<br>int ObjectTypeMQL4(string name)<br>  {<br>   return((int)ObjectGetInteger(0,name,OBJPROP_TYPE));<br>  }<br>``` | [ObjectType](https://docs.mql4.com/objects/objecttype "https://docs.mql4.com/objects/objecttype")<br>The function returns the object type value.<br>[ObjectGetInteger](https://www.mql5.com/en/docs/objects/objectgetinteger) |

### 16\. String Functions

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>string StringConcatenate(...)<br>``` | ```<br>int StringConcatenate(string &string_var,<br>                      void argument1<br>                      void argument2<br>                      ...)<br>``` | [StringConcatenate](https://docs.mql4.com/strings/stringconcatenate "https://docs.mql4.com/strings/stringconcatenate")<br>Forms a string of the data passed and returns it.<br>[StringConcatenate](https://www.mql5.com/en/docs/strings/stringconcatenate) |
| ```<br>int StringFind(string text,<br>               string matched_text,<br>               int start=0)<br>``` | ```<br>int StringFind(string string_value,<br>               string match_substring,<br>               int start_pos=0)<br>``` | [StringFind](https://docs.mql4.com/strings/stringfind "https://docs.mql4.com/strings/stringfind")<br>Search for a substring. Returns the position in the string from which the searched substring begins, or -1 if the substring has not been found.<br>[StringFind](https://www.mql5.com/en/docs/strings/stringfind) |
| ```<br>int StringGetChar(string text,<br>                  int pos)<br>``` | ```<br>ushort StringGetCharacter(string string_value,<br>                          int pos)<br>``` | [StringGetChar](https://docs.mql4.com/strings/stringgetchar "https://docs.mql4.com/strings/stringgetchar")<br>Returns character (code) from the specified position in the string. <br>[StringGetCharacter](https://www.mql5.com/en/docs/strings/stringgetcharacter) |
| ```<br>int StringLen(string text)<br>``` | ```<br>int StringLen(string string_value)<br>``` | [StringLen](https://docs.mql4.com/strings/stringlen "https://docs.mql4.com/strings/stringlen")<br>Returns character count in a string.<br>[StringLen](https://www.mql5.com/en/docs/strings/stringlen) |
| ```<br>string StringSetChar(string text,<br>                     int pos,<br>                     int value)<br>``` | ```<br>bool StringSetCharacter(string &string_var,<br>                        int pos,<br>                        ushort character)<br>``` | [StringSetChar](https://docs.mql4.com/strings/stringsetchar "https://docs.mql4.com/strings/stringsetchar")<br>Returns the string copy with changed character in the specified position.<br>[StringSetCharacter](https://www.mql5.com/en/docs/strings/stringsetcharacter) |
| ```<br>string StringSubstr(string text,<br>                    int start,<br>                    int length=0)<br>``` | ```<br>string StringSubstr(string string_value,<br>                    int start_pos,<br>                    int length=-1)<br>``` | [StringSubstr](https://docs.mql4.com/strings/stringsubstr "https://docs.mql4.com/strings/stringsubstr")<br>Extracts a substring from text string starting from the given position.<br>[StringSubstr](https://www.mql5.com/en/docs/strings/stringsubstr) |
| ```<br>string StringTrimLeft(string text)<br>``` | ```<br>int StringTrimLeft(string& string_var)<br>``` | [StringTrimLeft](https://docs.mql4.com/strings/stringtrimleft "https://docs.mql4.com/strings/stringtrimleft")<br>The function cuts line feed characters, spaces and tabs in the left part of the string.<br>[StringTrimLeft](https://www.mql5.com/en/docs/strings/stringtrimleft) |
| ```<br>string StringTrimRight(string text)<br>``` | ```<br>int StringTrimRight(string& string_var)<br>``` | [StringTrimRight](https://docs.mql4.com/strings/stringtrimright "https://docs.mql4.com/strings/stringtrimright")<br>The function cuts line feed characters, spaces and tabs in the right part of the string.<br>[StringTrimRight](https://www.mql5.com/en/docs/strings/stringtrimright) |

### 17\. Technical Indicators

The principles of use of the technical indicators in Expert Advisors are considered in the article [MQL5 for Newbies: Guide to Using Technical Indicators in Expert Advisors](https://www.mql5.com/en/articles/31). The method, used in this reference is sufficient to get the indicator calculation results for the specified price. To use this method, we need the auxiliary function:

```
double CopyBufferMQL4(int handle,int index,int shift)
  {
   double buf[];
   switch(index)
     {
      case 0: if(CopyBuffer(handle,0,shift,1,buf)>0)
         return(buf[0]); break;
      case 1: if(CopyBuffer(handle,1,shift,1,buf)>0)
         return(buf[0]); break;
      case 2: if(CopyBuffer(handle,2,shift,1,buf)>0)
         return(buf[0]); break;
      case 3: if(CopyBuffer(handle,3,shift,1,buf)>0)
         return(buf[0]); break;
      case 4: if(CopyBuffer(handle,4,shift,1,buf)>0)
         return(buf[0]); break;
      default: break;
     }
   return(EMPTY_VALUE);
  }
```

let's declare the following constants:

```
ENUM_MA_METHOD MethodMigrate(int method)
  {
   switch(method)
     {
      case 0: return(MODE_SMA);
      case 1: return(MODE_EMA);
      case 2: return(MODE_SMMA);
      case 3: return(MODE_LWMA);
      default: return(MODE_SMA);
     }
  }
ENUM_APPLIED_PRICE PriceMigrate(int price)
  {
   switch(price)
     {
      case 1: return(PRICE_CLOSE);
      case 2: return(PRICE_OPEN);
      case 3: return(PRICE_HIGH);
      case 4: return(PRICE_LOW);
      case 5: return(PRICE_MEDIAN);
      case 6: return(PRICE_TYPICAL);
      case 7: return(PRICE_WEIGHTED);
      default: return(PRICE_CLOSE);
     }
  }
ENUM_STO_PRICE StoFieldMigrate(int field)
  {
   switch(field)
     {
      case 0: return(STO_LOWHIGH);
      case 1: return(STO_CLOSECLOSE);
      default: return(STO_LOWHIGH);
     }
  }
//+------------------------------------------------------------------+
enum ALLIGATOR_MODE  { MODE_GATORJAW=1,   MODE_GATORTEETH, MODE_GATORLIPS };
enum ADX_MODE        { MODE_MAIN,         MODE_PLUSDI, MODE_MINUSDI };
enum UP_LOW_MODE     { MODE_BASE,         MODE_UPPER,      MODE_LOWER };
enum ICHIMOKU_MODE   { MODE_TENKANSEN=1,  MODE_KIJUNSEN, MODE_SENKOUSPANA, MODE_SENKOUSPANB, MODE_CHINKOUSPAN };
enum MAIN_SIGNAL_MODE{ MODE_MAIN,         MODE_SIGNAL };
```

| MQL4 | MQL5 | Decsription |
| --- | --- | --- |
| ```<br>double iAC(string symbol,<br>           int timeframe,<br>           int shift)<br>``` | ```<br>double iACMQL4(string symbol,<br>               int tf,<br>               int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=iAC(symbol,timeframe);<br>   if(handle<0)<br>     {<br>      Print("The iAC object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iAC](https://docs.mql4.com/indicators/iac "https://docs.mql4.com/indicators/iac")<br>Calculates the Bill Williams' Accelerator/Decelerator oscillator.<br>[iAC](https://www.mql5.com/en/docs/indicators/iac) |
| ```<br>double iAD(string symbol,<br>           int timeframe,<br>           int shift)<br>``` | ```<br>double iADMQL4(string symbol,<br>               int tf,<br>               int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=(int)iAD(symbol,timeframe,VOLUME_TICK);<br>   if(handle<0)<br>     {<br>      Print("The iAD object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iAD](https://docs.mql4.com/indicators/iad "https://docs.mql4.com/indicators/iad")<br>Calculates the Accumulation/Distribution indicator and returns its value.<br>[iAD](https://www.mql5.com/en/docs/indicators/iad) |
| ```<br>double iAlligator(string symbol,<br>                  int timeframe,<br>                  int jaw_period,<br>                  int jaw_shift,<br>                  int teeth_period,<br>                  int teeth_shift,<br>                  int lips_period,<br>                  int lips_shift,<br>                  int ma_method,<br>                  int applied_price,<br>                  int mode,<br>                  int shift)<br>``` | ```<br>double iAlligatorMQL4(string symbol,<br>                      int tf,<br>                      int jaw_period,<br>                      int jaw_shift,<br>                      int teeth_period,<br>                      int teeth_shift,<br>                      int lips_period,<br>                      int lips_shift,<br>                      int method,<br>                      int price,<br>                      int mode,<br>                      int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   ENUM_MA_METHOD ma_method=MethodMigrate(method);<br>   ENUM_APPLIED_PRICE applied_price=PriceMigrate(price);<br>   int handle=iAlligator(symbol,timeframe,jaw_period,jaw_shift,<br>                         teeth_period,teeth_shift,<br>                         lips_period,lips_shift,<br>                         ma_method,applied_price);<br>   if(handle<0)<br>     {<br>      Print("The iAlligator object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,mode-1,shift));<br>  }<br>``` | [iAlligator](https://docs.mql4.com/indicators/ialligator "https://docs.mql4.com/indicators/ialligator")<br>Calculates the Bill Williams' Alligator and returns its value.<br>[iAlligator](https://www.mql5.com/en/docs/indicators/ialligator) |
| ```<br>double iADX(string symbol,<br>            int timeframe,<br>            int period,<br>            int applied_price,<br>            int mode,<br>            int shift)<br>``` | ```<br>double iADXMQL4(string symbol,<br>                int tf,<br>                int period,<br>                int price,<br>                int mode,<br>                int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=iADX(symbol,timeframe,period);<br>   if(handle<0)<br>     {<br>      Print("The iADX object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,mode,shift));<br>  }<br>``` | [iADX](https://docs.mql4.com/indicators/iadx "https://docs.mql4.com/indicators/iadx")<br>Calculates the Movement directional index and returns its value.<br>[iADX](https://www.mql5.com/en/docs/indicators/iadx) |
| ```<br>double iATR(string symbol,<br>            int timeframe,<br>            int period,<br>            int shift)<br>``` | ```<br>double iATRMQL4(string symbol,<br>                int tf,<br>                int period,<br>                int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=iATR(symbol,timeframe,period);<br>   if(handle<0)<br>     {<br>      Print("The iATR object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iATR](https://docs.mql4.com/indicators/iatr "https://docs.mql4.com/indicators/iatr")<br>Calculates the Indicator of the average true range and returns its value.<br>[iATR](https://www.mql5.com/en/docs/indicators/iatr) |
| ```<br>double iAO(string symbol,<br>           int timeframe,<br>           int shift)<br>``` | ```<br>double iAOMQL4(string symbol,<br>               int tf,<br>               int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=iAO(symbol,timeframe);<br>   if(handle<0)<br>     {<br>      Print("The iAO object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iAO](https://docs.mql4.com/indicators/iao "https://docs.mql4.com/indicators/iao")<br>Calculates the Bill Williams' Awesome oscillator and returns its value.<br>[iAO](https://www.mql5.com/en/docs/indicators/iao) |
| ```<br>double iBearsPower(string symbol,<br>                   int timeframe,<br>                   int period,<br>                   int applied_price,<br>                   int shift)<br>``` | ```<br>double iBearsPowerMQL4(string symbol,<br>                       int tf,<br>                       int period,<br>                       int price,<br>                       int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=iBearsPower(symbol,timeframe,period);<br>   if(handle<0)<br>     {<br>      Print("The iBearsPower object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iBearsPower](https://docs.mql4.com/indicators/ibearspower "https://docs.mql4.com/indicators/ibearspower")<br>Calculates the Bears Power indicator and returns its value.<br>[iBearsPower](https://www.mql5.com/en/docs/indicators/ibearspower) |
| ```<br>double iBands(string symbol,<br>              int timeframe,<br>              int period,<br>              int deviation,<br>              int bands_shift,<br>              int applied_price,<br>              int mode,<br>              int shift)<br>``` | ```<br>double iBandsMQL4(string symbol,<br>                  int tf,<br>                  int period,<br>                  double deviation,<br>                  int bands_shift,<br>                  int method,<br>                  int mode,<br>                  int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   ENUM_MA_METHOD ma_method=MethodMigrate(method);<br>   int handle=iBands(symbol,timeframe,period,<br>                     bands_shift,deviation,ma_method);<br>   if(handle<0)<br>     {<br>      Print("The iBands object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,mode,shift));<br>  }<br>``` | [iBands](https://docs.mql4.com/indicators/ibands "https://docs.mql4.com/indicators/ibands")<br>Calculates the Bollinger bands indicator and returns its value.<br>[iBands](https://www.mql5.com/en/docs/indicators/ibands) |
| ```<br>double iBandsOnArray(double array[],<br>                     int total,<br>                     int period,<br>                     int deviation,<br>                     int bands_shift,<br>                     int mode,<br>                     int shift)<br>``` | - | [iBandsOnArray](https://docs.mql4.com/indicators/ibandsonarray "https://docs.mql4.com/indicators/ibandsonarray")<br>Calculation of the Bollinger Bands indicator on data stored in a numeric array. |
| ```<br>double iBullsPower(string symbol,<br>                   int timeframe,<br>                   int period,<br>                   int applied_price,<br>                   int shift)<br>``` | ```<br>double iBullsPowerMQL4(string symbol,<br>                       int tf,<br>                       int period,<br>                       int price,<br>                       int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=iBullsPower(symbol,timeframe,period);<br>   if(handle<0)<br>     {<br>      Print("The iBullsPower object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iBullsPower](https://docs.mql4.com/indicators/ibullspower "https://docs.mql4.com/indicators/ibullspower")<br>Calculates the Bulls Power indicator and returns its value.<br>[iBullsPower](https://www.mql5.com/en/docs/indicators/ibullspower) |
| ```<br>double iCCI(string symbol,<br>            int timeframe,<br>            int period,<br>            int applied_price,<br>            int shift)<br>``` | ```<br>double iCCIMQL4(string symbol,<br>                int tf,<br>                int period,<br>                int price,<br>                int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   ENUM_APPLIED_PRICE applied_price=PriceMigrate(price);<br>   int handle=iCCI(symbol,timeframe,period,price);<br>   if(handle<0)<br>     {<br>      Print("The iCCI object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iCCI](https://docs.mql4.com/indicators/icci "https://docs.mql4.com/indicators/icci")<br>Calculates the Commodity channel index and returns its value.<br>[iCCI](https://www.mql5.com/en/docs/indicators/icci) |
| ```<br>double iCCIOnArray(double array[],<br>                   int total,<br>                   int period,<br>                   int shift)<br>``` | - | [iCCIOnArray](https://docs.mql4.com/indicators/iccionarray "https://docs.mql4.com/indicators/iccionarray")<br>Calculation of the Commodity Channel Index on data stored in a numeric array. |
| ```<br>double iCustom(string symbol,<br>               int timeframe,<br>               string name,<br>               ...,<br>               int mode,<br>               int shift)<br>``` | ```<br>int iCustom(string symbol,<br>            ENUM_TIMEFRAMES period,<br>            string name<br>            ...)<br>``` | [iCustom](https://docs.mql4.com/indicators/icustom "https://docs.mql4.com/indicators/icustom")<br>Calculates the specified custom indicator and returns its value.<br>[iCustom](https://www.mql5.com/en/docs/indicators/icustom) |
| ```<br>double iDeMarker(string symbol,<br>                 int timeframe,<br>                 int period,<br>                 int shift)<br>``` | ```<br>double iDeMarkerMQL4(string symbol,<br>                     int tf,<br>                     int period,<br>                     int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=iDeMarker(symbol,timeframe,period);<br>   if(handle<0)<br>     {<br>      Print("The iDeMarker object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iDeMarker](https://docs.mql4.com/indicators/idemarker "https://docs.mql4.com/indicators/idemarker")<br>Calculates the DeMarker indicator and returns its value.<br>[iDeMarker](https://www.mql5.com/en/docs/indicators/idemarker) |
| ```<br>double iEnvelopes(string symbol,<br>                  int timeframe,<br>                  int ma_period,<br>                  int ma_method,<br>                  int ma_shift,<br>                  int applied_price,<br>                  double deviation,<br>                  int mode,<br>                  int shift)<br>``` | ```<br>double EnvelopesMQL4(string symbol,<br>                     int tf,<br>                     int ma_period,<br>                     int method,<br>                     int ma_shift,<br>                     int price,<br>                     double deviation,<br>                     int mode,<br>                     int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   ENUM_MA_METHOD ma_method=MethodMigrate(method);<br>   ENUM_APPLIED_PRICE applied_price=PriceMigrate(price);<br>   int handle=iEnvelopes(symbol,timeframe,<br>                         ma_period,ma_shift,ma_method,<br>                         applied_price,deviation);<br>   if(handle<0)<br>     {<br>      Print("The iEnvelopes object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,mode-1,shift));<br>  }<br>``` | [iEnvelopes](https://docs.mql4.com/indicators/ienvelopes "https://docs.mql4.com/indicators/ienvelopes")<br>Calculates the Envelopes indicator and returns its value.<br>[iEnvelopes](https://www.mql5.com/en/docs/indicators/ienvelopes) |
| ```<br>double iEnvelopesOnArray(double array[],<br>                         int total,<br>                         int ma_period,<br>                         int ma_method,<br>                         int ma_shift,<br>                         double deviation,<br>                         int mode,<br>                         int shift)<br>``` | - | [iEnvelopesOnArray](https://docs.mql4.com/indicators/ienvelopesonarray "https://docs.mql4.com/indicators/ienvelopesonarray")<br>Calculation of the Envelopes indicator on data stored in a numeric array. |
| ```<br>double iForce(string symbol,<br>              int timeframe,<br>              int period,<br>              int ma_method,<br>              int applied_price,<br>              int shift)<br>``` | ```<br>double iForceMQL4(string symbol,<br>                  int tf,<br>                  int period,<br>                  int method,<br>                  int price,<br>                  int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   ENUM_MA_METHOD ma_method=MethodMigrate(method);<br>   int handle=iForce(symbol,timeframe,period,ma_method,VOLUME_TICK);<br>   if(handle<0)<br>     {<br>      Print("The iForce object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iForce](https://docs.mql4.com/indicators/iforce "https://docs.mql4.com/indicators/iforce")<br>Calculates the Force index and returns its value.<br>[iForce](https://www.mql5.com/en/docs/indicators/iforce) |
| ```<br>double iFractals(string symbol,<br>                 int timeframe,<br>                 int mode,<br>                 int shift)<br>``` | ```<br>double iFractalsMQL4(string symbol,<br>                     int tf,<br>                     int mode,<br>                     int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=iFractals(symbol,timeframe);<br>   if(handle<0)<br>     {<br>      Print("The iFractals object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,mode-1,shift));<br>  }<br>``` | [iFractals](https://docs.mql4.com/indicators/ifractals "https://docs.mql4.com/indicators/ifractals")<br>Calculates the Fractals and returns its value.<br>[iFractals](https://www.mql5.com/en/docs/indicators/ifractals) |
| ```<br>double iGator(string symbol,<br>              int timeframe,<br>              int jaw_period,<br>              int jaw_shift,<br>              int teeth_period,<br>              int teeth_shift,<br>              int lips_period,<br>              int lips_shift,<br>              int ma_method,<br>              int applied_price,<br>              int mode,<br>              int shift)<br>``` | ```<br>double iGatorMQL4(string symbol,<br>                  int tf,<br>                  int jaw_period,<br>                  int jaw_shift,<br>                  int teeth_period,<br>                  int teeth_shift,<br>                  int lips_period,<br>                  int lips_shift,<br>                  int method,<br>                  int price,<br>                  int mode,<br>                  int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   ENUM_MA_METHOD ma_method=MethodMigrate(method);<br>   ENUM_APPLIED_PRICE applied_price=PriceMigrate(price);<br>   int handle=iGator(symbol,timeframe,jaw_period,jaw_shift,<br>                     teeth_period,teeth_shift,<br>                     lips_period,lips_shift,<br>                     ma_method,applied_price);<br>   if(handle<0)<br>     {<br>      Print("The iGator object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,mode-1,shift));<br>  }<br>``` | [iGator](https://docs.mql4.com/indicators/igator "https://docs.mql4.com/indicators/igator")<br>Gator oscillator calculation.<br>[iGator](https://www.mql5.com/en/docs/indicators/igator) |
| ```<br>double iIchimoku(string symbol,<br>                 int timeframe,<br>                 int tenkan_sen,<br>                 int kijun_sen,<br>                 int senkou_span_b,<br>                 int mode,<br>                 int shift)<br>``` | ```<br>double iIchimokuMQL4(string symbol,<br>                     int tf,<br>                     int tenkan_sen,<br>                     int kijun_sen,<br>                     int senkou_span_b,<br>                     int mode,<br>                     int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=iIchimoku(symbol,timeframe,<br>                        tenkan_sen,kijun_sen,senkou_span_b);<br>   if(handle<0)<br>     {<br>      Print("The iIchimoku object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,mode-1,shift));<br>  }<br>``` | [iIchimoku](https://docs.mql4.com/indicators/iichimoku "https://docs.mql4.com/indicators/iichimoku")<br>Calculates the Ichimoku Kinko Hyo and returns its value.<br>[iIchimoku](https://www.mql5.com/en/docs/indicators/iichimoku) |
| ```<br>double iBWMFI(string symbol,<br>              int timeframe,<br>              int shift)<br>``` | ```<br>double iBWMFIMQL4(string symbol,<br>                  int tf,<br>                  int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=(int)iBWMFI(symbol,timeframe,VOLUME_TICK);<br>   if(handle<0)<br>     {<br>      Print("The iBWMFI object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iBWMFI](https://docs.mql4.com/indicators/ibwmfi "https://docs.mql4.com/indicators/ibwmfi")<br>Calculates the Bill Williams Market Facilitation index and returns its value.<br>[iBWMFI](https://www.mql5.com/en/docs/indicators/ibwmfi) |
| ```<br>double iMomentum(string symbol,<br>                 int timeframe,<br>                 int period,<br>                 int applied_price,<br>                 int shift)<br>``` | ```<br>double iMomentumMQL4(string symbol,<br>                     int tf,<br>                     int period,<br>                     int price,<br>                     int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   ENUM_APPLIED_PRICE applied_price=PriceMigrate(price);<br>   int handle=iMomentum(symbol,timeframe,period,applied_price);<br>   if(handle<0)<br>     {<br>      Print("The iMomentum object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iMomentum](https://docs.mql4.com/indicators/imomentum "https://docs.mql4.com/indicators/imomentum")<br>Calculates the Momentum indicator and returns its value.<br>[iMomentum](https://www.mql5.com/en/docs/indicators/imomentum) |
| ```<br>double iMomentumOnArray(double array[],<br>                        int total,<br>                        int period,<br>                        int shift)<br>``` | - | [iMomentumOnArray](https://docs.mql4.com/indicators/imomentumonarray "https://docs.mql4.com/indicators/imomentumonarray")<br>Calculation of the Momentum indicator on data stored in a numeric array. |
| ```<br>double iMFI(string symbol,<br>            int timeframe,<br>            int period,<br>            int shift)<br>``` | ```<br>double iMFIMQL4(string symbol,<br>                int tf,<br>                int period,<br>                int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=(int)iMFI(symbol,timeframe,period,VOLUME_TICK);<br>   if(handle<0)<br>     {<br>      Print("The iMFI object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iMFI](https://docs.mql4.com/indicators/imfi "https://docs.mql4.com/indicators/imfi")<br>Calculates the Money flow index and returns its value.<br>[iMFI](https://www.mql5.com/en/docs/indicators/imfi) |
| ```<br>double iMA(string symbol,<br>           int timeframe,<br>           int period,<br>           int ma_shift,<br>           int ma_method,<br>           int applied_price,<br>           int shift)<br>``` | ```<br>double iMAMQL4(string symbol,<br>               int tf,<br>               int period,<br>               int ma_shift,<br>               int method,<br>               int price,<br>               int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   ENUM_MA_METHOD ma_method=MethodMigrate(method);<br>   ENUM_APPLIED_PRICE applied_price=PriceMigrate(price);<br>   int handle=iMA(symbol,timeframe,period,ma_shift,<br>                  ma_method,applied_price);<br>   if(handle<0)<br>     {<br>      Print("The iMA object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iMA](https://docs.mql4.com/indicators/ima "https://docs.mql4.com/indicators/ima")<br>Calculates the Moving average indicator and returns its value.<br>[iMA](https://www.mql5.com/en/docs/indicators/ima) |
| ```<br>double iMAOnArray(double array[],<br>                  int total,<br>                  int period,<br>                  int ma_shift,<br>                  int ma_method,<br>                  int shift)<br>``` | ```<br>double iMAOnArrayMQL4(double &array[],<br>                      int total,<br>                      int period,<br>                      int ma_shift,<br>                      int ma_method,<br>                      int shift)<br>  {<br>   double buf[],arr[];<br>   if(total==0) total=ArraySize(array);<br>   if(total>0 && total<=period) return(0);<br>   if(shift>total-period-ma_shift) return(0);<br>   switch(ma_method)<br>     {<br>      case MODE_SMA :<br>        {<br>         total=ArrayCopy(arr,array,0,shift+ma_shift,period);<br>         if(ArrayResize(buf,total)<0) return(0);<br>         double sum=0;<br>         int    i,pos=total-1;<br>         for(i=1;i<period;i++,pos--)<br>            sum+=arr[pos];<br>         while(pos>=0)<br>           {<br>            sum+=arr[pos];<br>            buf[pos]=sum/period;<br>            sum-=arr[pos+period-1];<br>            pos--;<br>           }<br>         return(buf[0]);<br>        }<br>      case MODE_EMA :<br>        {<br>         if(ArrayResize(buf,total)<0) return(0);<br>         double pr=2.0/(period+1);<br>         int    pos=total-2;<br>         while(pos>=0)<br>           {<br>            if(pos==total-2) buf[pos+1]=array[pos+1];<br>            buf[pos]=array[pos]*pr+buf[pos+1]*(1-pr);<br>            pos--;<br>           }<br>         return(buf[shift+ma_shift]);<br>        }<br>      case MODE_SMMA :<br>        {<br>         if(ArrayResize(buf,total)<0) return(0);<br>         double sum=0;<br>         int    i,k,pos;<br>         pos=total-period;<br>         while(pos>=0)<br>           {<br>            if(pos==total-period)<br>              {<br>               for(i=0,k=pos;i<period;i++,k++)<br>                 {<br>                  sum+=array[k];<br>                  buf[k]=0;<br>                 }<br>              }<br>            else sum=buf[pos+1]*(period-1)+array[pos];<br>            buf[pos]=sum/period;<br>            pos--;<br>           }<br>         return(buf[shift+ma_shift]);<br>        }<br>      case MODE_LWMA :<br>        {<br>         if(ArrayResize(buf,total)<0) return(0);<br>         double sum=0.0,lsum=0.0;<br>         double price;<br>         int    i,weight=0,pos=total-1;<br>         for(i=1;i<=period;i++,pos--)<br>           {<br>            price=array[pos];<br>            sum+=price*i;<br>            lsum+=price;<br>            weight+=i;<br>           }<br>         pos++;<br>         i=pos+period;<br>         while(pos>=0)<br>           {<br>            buf[pos]=sum/weight;<br>            if(pos==0) break;<br>            pos--;<br>            i--;<br>            price=array[pos];<br>            sum=sum-lsum+price*period;<br>            lsum-=array[i];<br>            lsum+=price;<br>           }<br>         return(buf[shift+ma_shift]);<br>        }<br>      default: return(0);<br>     }<br>   return(0);<br>  }<br>``` |  |
| ```<br>double iOsMA(string symbol,<br>             int timeframe,<br>             int fast_ema_period,<br>             int slow_ema_period,<br>             int signal_period,<br>             int applied_price,<br>             int shift)<br>``` | ```<br>double iOsMAMQL4(string symbol,<br>                 int tf,<br>                 int fast_ema_period,<br>                 int slow_ema_period,<br>                 int signal_period,<br>                 int price,<br>                 int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   ENUM_APPLIED_PRICE applied_price=PriceMigrate(price);<br>   int handle=iOsMA(symbol,timeframe,<br>                    fast_ema_period,slow_ema_period,<br>                    signal_period,applied_price);<br>   if(handle<0)<br>     {<br>      Print("The iOsMA object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iOsMA](https://docs.mql4.com/indicators/iosma "https://docs.mql4.com/indicators/iosma")<br>Calculates the Moving Average of Oscillator and returns its value.<br>[iOsMA](https://www.mql5.com/en/docs/indicators/iosma) |
| ```<br>double iMACD(string symbol,<br>             int timeframe,<br>             int fast_ema_period,<br>             int slow_ema_period,<br>             int signal_period,<br>             int applied_price,<br>             int mode,<br>             int shift)<br>``` | ```<br>double iMACDMQL4(string symbol,<br>                 int tf,<br>                 int fast_ema_period,<br>                 int slow_ema_period,<br>                 int signal_period,<br>                 int price,<br>                 int mode,<br>                 int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   ENUM_APPLIED_PRICE applied_price=PriceMigrate(price);<br>   int handle=iMACD(symbol,timeframe,<br>                    fast_ema_period,slow_ema_period,<br>                    signal_period,applied_price);<br>   if(handle<0)<br>     {<br>      Print("The iMACD object is not created: Error ",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,mode,shift));<br>  }<br>``` | [iMACD](https://docs.mql4.com/indicators/imacd "https://docs.mql4.com/indicators/imacd")<br>Calculates the Moving averages convergence/divergence and returns its value.<br>[iMACD](https://www.mql5.com/en/docs/indicators/imacd) |
| ```<br>double iOBV(string symbol,<br>            int timeframe,<br>            int applied_price,<br>            int shift)<br>``` | ```<br>double iOBVMQL4(string symbol,<br>                int tf,<br>                int price,<br>                int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=iOBV(symbol,timeframe,VOLUME_TICK);<br>   if(handle<0)<br>     {<br>      Print("The iOBV object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iOBV](https://docs.mql4.com/indicators/iobv "https://docs.mql4.com/indicators/iobv")<br>Calculates the On Balance Volume indicator and returns its value.<br>[iOBV](https://www.mql5.com/en/docs/indicators/iobv) |
| ```<br>double iSAR(string symbol,<br>            int timeframe,<br>            double step,<br>            double maximum,<br>            int shift)<br>``` | ```<br>double iSARMQL4(string symbol,<br>                int tf,<br>                double step,<br>                double maximum,<br>                int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=iSAR(symbol,timeframe,step,maximum);<br>   if(handle<0)<br>     {<br>      Print("The iSAR object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iSAR](https://docs.mql4.com/indicators/isar "https://docs.mql4.com/indicators/isar")<br>Calculates the Parabolic Stop and Reverse system and returns its value.<br>[iSAR](https://www.mql5.com/en/docs/indicators/isar) |
| ```<br>double iRSI(string symbol,<br>            int timeframe,<br>            int period,<br>            int applied_price,<br>            int shift)<br>``` | ```<br>double iRSIMQL4(string symbol,<br>                int tf,<br>                int period,<br>                int price,<br>                int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   ENUM_APPLIED_PRICE applied_price=PriceMigrate(price);<br>   int handle=iRSI(symbol,timeframe,period,applied_price);<br>   if(handle<0)<br>     {<br>      Print("The iRSI object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iRSI](https://docs.mql4.com/indicators/irsi "https://docs.mql4.com/indicators/irsi")<br>Calculates the Relative strength index and returns its value.<br>[iRSI](https://www.mql5.com/en/docs/indicators/irsi) |
| ```<br>double iRSIOnArray(double array[],<br>                   int total,<br>                   int period,<br>                   int shift)<br>``` | - | [iRSIOnArray](https://docs.mql4.com/indicators/irsionarray "https://docs.mql4.com/indicators/irsionarray")<br>Calculation of the Relative Strength Index on data stored in a numeric array. |
| ```<br>double iRVI(string symbol,<br>            int timeframe,<br>            int period,<br>            int mode,<br>            int shift)<br>``` | ```<br>double iRVIMQL4(string symbol,<br>                int tf,<br>                int period,<br>                int mode,<br>                int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=iRVI(symbol,timeframe,period);<br>   if(handle<0)<br>     {<br>      Print("The iRVI object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,mode,shift));<br>  }<br>``` | [iRVI](https://docs.mql4.com/indicators/irvi "https://docs.mql4.com/indicators/irvi")<br>Calculates the Relative Vigor index and returns its value.<br>[iRVI](https://www.mql5.com/en/docs/indicators/irvi) |
| ```<br>double iStdDev(string symbol,<br>               int timeframe,<br>               int ma_period,<br>               int ma_shift,<br>               int ma_method,<br>               int applied_price,<br>               int shift)<br>``` | ```<br>double iStdDevMQL4(string symbol,<br>                   int tf,<br>                   int ma_period,<br>                   int ma_shift,<br>                   int method,<br>                   int price,<br>                   int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   ENUM_MA_METHOD ma_method=MethodMigrate(method);<br>   ENUM_APPLIED_PRICE applied_price=PriceMigrate(price);<br>   int handle=iStdDev(symbol,timeframe,ma_period,ma_shift,<br>                      ma_method,applied_price);<br>   if(handle<0)<br>     {<br>      Print("The iStdDev object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iStdDev](https://docs.mql4.com/indicators/istddev "https://docs.mql4.com/indicators/istddev")<br>Calculates the Standard Deviation indicator and returns its value.<br>[iStdDev](https://www.mql5.com/en/docs/indicators/istddev) |
| ```<br>double iStdDevOnArray(double array[],<br>                      int total,<br>                      int ma_period,<br>                      int ma_shift,<br>                      int ma_method,<br>                      int shift)<br>``` | - | [iStdDevOnArray](https://docs.mql4.com/indicators/istddevonarray "https://docs.mql4.com/indicators/istddevonarray")<br>Calculation of the Standard Deviation indicator on data stored in a numeric array. |
| ```<br>double iStochastic(string symbol,<br>                   int timeframe,<br>                   int%Kperiod,<br>                   int%Dperiod,<br>                   int slowing,<br>                   int method,<br>                   int price_field,<br>                   int mode,<br>                   int shift)<br>``` | ```<br>double iStochasticMQL4(string symbol,<br>                       int tf,<br>                       int Kperiod,<br>                       int Dperiod,<br>                       int slowing,<br>                       int method,<br>                       int field,<br>                       int mode,<br>                       int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   ENUM_MA_METHOD ma_method=MethodMigrate(method);<br>   ENUM_STO_PRICE price_field=StoFieldMigrate(field);<br>   int handle=iStochastic(symbol,timeframe,Kperiod,Dperiod,<br>                          slowing,ma_method,price_field);<br>   if(handle<0)<br>     {<br>      Print("The iStochastic object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,mode,shift));<br>  }<br>``` | [iStochastic](https://docs.mql4.com/indicators/istochastic "https://docs.mql4.com/indicators/istochastic")<br>Calculates the Stochastic oscillator and returns its value.<br>[iStochastic](https://www.mql5.com/en/docs/indicators/istochastic) |
| ```<br>double iWPR(string symbol,<br>            int timeframe,<br>            int period,<br>            int shift)<br>``` | ```<br>double iWPRMQL4(string symbol,<br>                int tf,<br>                int period,<br>                int shift)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   int handle=iWPR(symbol,timeframe,period);<br>   if(handle<0)<br>     {<br>      Print("The iWPR object is not created: Error",GetLastError());<br>      return(-1);<br>     }<br>   else<br>      return(CopyBufferMQL4(handle,0,shift));<br>  }<br>``` | [iWPR](https://docs.mql4.com/indicators/iwpr "https://docs.mql4.com/indicators/iwpr")<br>Calculates the Larry William's percent range indicator and returns its value.<br>[iWPR](https://www.mql5.com/en/docs/indicators/iwpr) |

### 18\. Timeseries Access

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>int iBars(string symbol,<br>          int timeframe)<br>``` | ```<br>int iBarsMQL4(string symbol,int tf)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   return(Bars(symbol,timeframe));<br>  }<br>``` | [```\<br>int iBarsMQL4(string symbol,int tf)\<br>  {\<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);\<br>   return(Bars(symbol,timeframe));\<br>  }\<br>```\<br>\<br>Bars](https://docs.mql4.com/series/ibars "https://docs.mql4.com/series/ibars")<br>Returns the number of bars on the specified chart.<br>[Bars](https://www.mql5.com/en/docs/series/bars) |
| ```<br>int iBarShift(string symbol,<br>              int timeframe,<br>              datetime time,<br>              bool exact=false<br>``` | ```<br>int iBarShiftMQL4(string symbol,<br>                  int tf,<br>                  datetime time,<br>                  bool exact=false)<br>  {<br>   if(time<0) return(-1);<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   datetime Arr[],time1;<br>   CopyTime(symbol,timeframe,0,1,Arr);<br>   time1=Arr[0];<br>   if(CopyTime(symbol,timeframe,time,time1,Arr)>0)<br>     {<br>      if(ArraySize(Arr)>2) return(ArraySize(Arr)-1);<br>      if(time<time1) return(1);<br>      else return(0);<br>     }<br>   else return(-1);<br>  }<br>``` | [iBarShift](https://docs.mql4.com/series/ibarshift "https://docs.mql4.com/series/ibarshift")<br>Search for bar by open time.<br>[CopyTime](https://www.mql5.com/en/docs/series/copytime), [ArraySize](https://www.mql5.com/en/docs/array/arraysize) |
| ```<br>double iClose(string symbol,<br>              int timeframe,<br>              int shift)<br>``` | ```<br>double iCloseMQL4(string symbol,int tf,int index)<br>{<br>   if(index < 0) return(-1);<br>   double Arr[];<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   if(CopyClose(symbol,timeframe, index, 1, Arr)>0) <br>        return(Arr[0]);<br>   else return(-1);<br>}<br>``` | [Close](https://docs.mql4.com/series/iclose "https://docs.mql4.com/series/iclose")<br>Returns Close value for the bar of indicated symbol with timeframe and shift. If local history is empty (not loaded), function returns 0.<br>[CopyRates](https://www.mql5.com/en/docs/series/copyrates), [MqlRates](https://www.mql5.com/en/docs/constants/structures/mqlrates) |
| ```<br>double iHigh(string symbol,<br>             int timeframe,<br>             int shift)<br>``` | ```<br>double iHighMQL4(string symbol,int tf,int index)<br>{<br>   if(index < 0) return(-1);<br>   double Arr[];<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   if(CopyHigh(symbol,timeframe, index, 1, Arr)>0) <br>        return(Arr[0]);<br>   else return(-1);<br>}<br>``` | [High](https://docs.mql4.com/series/ihigh "https://docs.mql4.com/series/ihigh")<br>Returns High value for the bar of indicated symbol with timeframe and shift. If local history is empty (not loaded), function returns 0.<br>[CopyRates](https://www.mql5.com/en/docs/series/copyrates), [MqlRates](https://www.mql5.com/en/docs/constants/structures/mqlrates) |
| ```<br>int iHighest(string symbol,<br>             int timeframe,<br>             int type,<br>             int count=WHOLE_ARRAY,<br>             int start=0)<br>``` | ```<br>int iHighestMQL4(string symbol,<br>                 int tf,<br>                 int type,<br>                 int count=WHOLE_ARRAY,<br>                 int start=0)<br>  {<br>   if(start<0) return(-1);<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   if(count<=0) count=Bars(symbol,timeframe);<br>   if(type<=MODE_OPEN)<br>     {<br>      double Open[];<br>      ArraySetAsSeries(Open,true);<br>      CopyOpen(symbol,timeframe,start,count,Open);<br>      return(ArrayMaximum(Open,0,count)+start);<br>     }<br>   if(type==MODE_LOW)<br>     {<br>      double Low[];<br>      ArraySetAsSeries(Low,true);<br>      CopyLow(symbol,timeframe,start,count,Low);<br>      return(ArrayMaximum(Low,0,count)+start);<br>     }<br>   if(type==MODE_HIGH)<br>     {<br>      double High[];<br>      ArraySetAsSeries(High,true);<br>      CopyHigh(symbol,timeframe,start,count,High);<br>      return(ArrayMaximum(High,0,count)+start);<br>     }<br>   if(type==MODE_CLOSE)<br>     {<br>      double Close[];<br>      ArraySetAsSeries(Close,true);<br>      CopyClose(symbol,timeframe,start,count,Close);<br>      return(ArrayMaximum(Close,0,count)+start);<br>     }<br>   if(type==MODE_VOLUME)<br>     {<br>      long Volume[];<br>      ArraySetAsSeries(Volume,true);<br>      CopyTickVolume(symbol,timeframe,start,count,Volume);<br>      return(ArrayMaximum(Volume,0,count)+start);<br>     }<br>   if(type>=MODE_TIME)<br>     {<br>      datetime Time[];<br>      ArraySetAsSeries(Time,true);<br>      CopyTime(symbol,timeframe,start,count,Time);<br>      return(ArrayMaximum(Time,0,count)+start);<br>      //---<br>     }<br>   return(0);<br>  }<br>``` | [iHighest](https://docs.mql4.com/series/ihighest "https://docs.mql4.com/series/ihighest")<br>Returns the shift of the maximum value over a specific number of periods depending on type.<br>[CopyOpen](https://www.mql5.com/en/docs/series/copyopen), [CopyLow](https://www.mql5.com/en/docs/series/copylow), [CopyHigh](https://www.mql5.com/en/docs/series/copyhigh), [CopyClose](https://www.mql5.com/en/docs/series/copyclose), [CopyTickVolume](https://www.mql5.com/en/docs/series/copytickvolume), [CopyTime,](https://www.mql5.com/en/docs/series/copytime) [ArrayMaximum](https://www.mql5.com/en/docs/array/arraymaximum) |
| ```<br>double iLow(string symbol,<br>            int timeframe,<br>            int shift)<br>``` | ```<br>double iLowMQL4(string symbol,int tf,int index)<br>{<br>   if(index < 0) return(-1);<br>   double Arr[];<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   if(CopyLow(symbol,timeframe, index, 1, Arr)>0)<br>        return(Arr[0]);<br>   else return(-1);<br>}<br>``` | [iLow](https://docs.mql4.com/series/ilow "https://docs.mql4.com/series/ilow")<br>Returns Low value for the bar of indicated symbol with timeframe and shift. If local history is empty (not loaded), function returns 0.<br>[CopyRates](https://www.mql5.com/en/docs/series/copyrates), [MqlRates](https://www.mql5.com/en/docs/constants/structures/mqlrates) |
| ```<br>int iLowest(string symbol,<br>            int timeframe,<br>            int type,<br>            int count=WHOLE_ARRAY,<br>            int start=0)<br>``` | ```<br>int iLowestMQL4(string symbol,<br>                int tf,<br>                int type,<br>                int count=WHOLE_ARRAY,<br>                int start=0)<br>  {<br>   if(start<0) return(-1);<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   if(count<=0) count=Bars(symbol,timeframe);<br>   if(type<=MODE_OPEN)<br>     {<br>      double Open[];<br>      ArraySetAsSeries(Open,true);<br>      CopyOpen(symbol,timeframe,start,count,Open);<br>      return(ArrayMinimum(Open,0,count)+start);<br>     }<br>   if(type==MODE_LOW)<br>     {<br>      double Low[];<br>      ArraySetAsSeries(Low,true);<br>      CopyLow(symbol,timeframe,start,count,Low);<br>      return(ArrayMinimum(Low,0,count)+start);<br>     }<br>   if(type==MODE_HIGH)<br>     {<br>      double High[];<br>      ArraySetAsSeries(High,true);<br>      CopyHigh(symbol,timeframe,start,count,High);<br>      return(ArrayMinimum(High,0,count)+start);<br>     }<br>   if(type==MODE_CLOSE)<br>     {<br>      double Close[];<br>      ArraySetAsSeries(Close,true);<br>      CopyClose(symbol,timeframe,start,count,Close);<br>      return(ArrayMinimum(Close,0,count)+start);<br>     }<br>   if(type==MODE_VOLUME)<br>     {<br>      long Volume[];<br>      ArraySetAsSeries(Volume,true);<br>      CopyTickVolume(symbol,timeframe,start,count,Volume);<br>      return(ArrayMinimum(Volume,0,count)+start);<br>     }<br>   if(type>=MODE_TIME)<br>     {<br>      datetime Time[];<br>      ArraySetAsSeries(Time,true);<br>      CopyTime(symbol,timeframe,start,count,Time);<br>      return(ArrayMinimum(Time,0,count)+start);<br>     }<br>//---<br>   return(0);<br>  }<br>``` | [iLowest](https://docs.mql4.com/series/ilowest "https://docs.mql4.com/series/ilowest")<br>Returns the shift of the lowest value over a specific number of periods depending on type.<br>[CopyOpen](https://www.mql5.com/en/docs/series/copyopen), [CopyLow](https://www.mql5.com/en/docs/series/copylow), [CopyHigh](https://www.mql5.com/en/docs/series/copyhigh), [CopyClose](https://www.mql5.com/en/docs/series/copyclose), [CopyTickVolume](https://www.mql5.com/en/docs/series/copytickvolume), [CopyTime](https://www.mql5.com/en/docs/series/copytime), [ArrayMinimum](https://www.mql5.com/en/docs/array/arrayminimum) |
| ```<br>double iOpen(string symbol,<br>             int timeframe,<br>             int shift)<br>``` | ```<br>double iOpenMQL4(string symbol,int tf,int index)<br>{   <br>   if(index < 0) return(-1);<br>   double Arr[];<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   if(CopyOpen(symbol,timeframe, index, 1, Arr)>0) <br>        return(Arr[0]);<br>   else return(-1);<br>}<br>``` | [iOpen](https://docs.mql4.com/series/iopen "https://docs.mql4.com/series/iopen")<br>Returns Open value for the bar of indicated symbol with timeframe and shift. If local history is empty (not loaded), function returns 0.<br>[CopyRates](https://www.mql5.com/en/docs/series/copyrates), [MqlRates](https://www.mql5.com/en/docs/constants/structures/mqlrates) |
| ```<br>datetime iTime(string symbol,<br>               int timeframe,<br>               int shift)<br>``` | ```<br>datetime iTimeMQL4(string symbol,int tf,int index)<br>{<br>   if(index < 0) return(-1);<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   datetime Arr[];<br>   if(CopyTime(symbol, timeframe, index, 1, Arr)>0)<br>        return(Arr[0]);<br>   else return(-1);<br>}<br>``` | [iTime](https://docs.mql4.com/series/itime "https://docs.mql4.com/series/itime")<br>Returns Time value for the bar of indicated symbol with timeframe and shift. If local history is empty (not loaded), function returns 0.<br>[CopyRates](https://www.mql5.com/en/docs/series/copyrates), [MqlRates](https://www.mql5.com/en/docs/constants/structures/mqlrates) |
| ```<br>double iVolume(string symbol,<br>               int timeframe,<br>               int shift)<br>``` | ```<br>int iVolumeMQL4(string symbol,int tf,int index)<br>{<br>   if(index < 0) return(-1);<br>   long Arr[];<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   if(CopyTickVolume(symbol, timeframe, index, 1, Arr)>0)<br>        return(Arr[0]);<br>   else return(-1);<br>}<br>``` | [iVolume](https://docs.mql4.com/series/ivolume "https://docs.mql4.com/series/ivolume")<br>Returns Tick Volume value for the bar of indicated symbol with timeframe and shift. If local history is empty (not loaded), function returns 0.<br>[CopyRates](https://www.mql5.com/en/docs/series/copyrates), [MqlRates](https://www.mql5.com/en/docs/constants/structures/mqlrates) |

### 19\. Chart Operations

| MQL4 | MQL5 | Description |
| --- | --- | --- |
| ```<br>void HideTestIndicators(bool hide)<br>``` | - | [HideTestIndicators](https://docs.mql4.com/customind/hidetestindicators "https://docs.mql4.com/customind/hidetestindicators")<br>The function sets a flag hiding indicators called by the Expert Advisor. |
| ```<br>int Period()<br>``` | ```<br>ENUM_TIMEFRAMES  Period()<br>``` | [Period](https://docs.mql4.com/check/period "https://docs.mql4.com/check/period")<br>Returns the amount of minutes determining the used period (chart timeframe).<br>[Period](https://www.mql5.com/en/docs/check/period) |
| ```<br>bool RefreshRates()<br>``` | - | [RefreshRates](https://docs.mql4.com/series/refreshrates "https://docs.mql4.com/series/refreshrates")<br>Refreshing of data in pre-defined variables and series arrays. |
| ```<br>string Symbol()<br>``` | ```<br>string Symbol()<br>``` | [Symbol](https://docs.mql4.com/check/symbol "https://docs.mql4.com/check/symbol")<br>Returns a text string with the name of the current financial instrument.<br>[Symbol](https://www.mql5.com/en/docs/check/symbol) |
| ```<br>int WindowBarsPerChart()<br>``` | ```<br>int ChartGetInteger(0,CHART_VISIBLE_BARS,0)<br>``` | [WindowBarsPerChart](https://docs.mql4.com/chart_operations/windowbarsperchart "https://docs.mql4.com/chart_operations/windowbarsperchart")<br>Function returns the amount of bars visible on the chart.<br>[ChartGetInteger](https://www.mql5.com/en/docs/chart_operations/chartgetinteger) |
| ```<br>string WindowExpertName()<br>``` | ```<br>string MQLInfoString(MQL5_PROGRAM_NAME)<br>``` | [WindowExpertName](https://docs.mql4.com/chart_operations/windowexpertname "https://docs.mql4.com/chart_operations/windowexpertname")<br>Returns name of the executed expert, script, custom indicator, or library, depending on the MQL4 program, from which this function has been called.<br>[MQLInfoString](https://www.mql5.com/en/docs/check/mqlinfostring) |
| ```<br>int WindowFind(string name)<br>``` | ```<br>int WindowFindMQL4(string name)<br>  {<br>   int window=-1;<br>   if((ENUM_PROGRAM_TYPE)MQLInfoInteger(MQL5_PROGRAM_TYPE)==PROGRAM_INDICATOR)<br>     {<br>      window=ChartWindowFind();<br>     }<br>   else<br>     {<br>      window=ChartWindowFind(0,name);<br>      if(window==-1) Print(__FUNCTION__+"(): Error = ",GetLastError());<br>     }<br>   return(window);<br>  }<br>``` | [WindowFind](https://docs.mql4.com/chart_operations/windowfind "https://docs.mql4.com/chart_operations/windowfind")<br>If indicator with name was found, the function returns the window index containing this specified indicator, otherwise it returns -1.<br>[ChartWindowFind](https://www.mql5.com/en/docs/chart_operations/chartwindowfind), [MQLInfoInteger](https://www.mql5.com/en/docs/check/mqlinfointeger) |
| ```<br>int WindowFirstVisibleBar()<br>``` | ```<br>int ChartGetInteger(0,CHART_FIRST_VISIBLE_BAR,0)<br>``` | [WindowFirstVisibleBar](https://docs.mql4.com/chart_operations/windowfirstvisiblebar "https://docs.mql4.com/chart_operations/windowfirstvisiblebar")<br>The function returns the first visible bar number in the current chart window.<br>[ChartGetInteger](https://www.mql5.com/en/docs/chart_operations/chartgetinteger) |
| ```<br>int WindowHandle(string symbol,<br>                 int timeframe)<br>``` | ```<br>int WindowHandleMQL4(string symbol,<br>                     int tf)<br>  {<br>   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);<br>   long currChart,prevChart=ChartFirst();<br>   int i=0,limit=100;<br>   while(i<limit)<br>     {<br>      currChart=ChartNext(prevChart);<br>      if(currChart<0) break;<br>      if(ChartSymbol(currChart)==symbol<br>         && ChartPeriod(currChart)==timeframe)<br>         return((int)currChart);<br>      prevChart=currChart;<br>      i++;<br>     }<br>   return(0);<br>  }<br>``` | [WindowHandle](https://docs.mql4.com/chart_operations/windowhandle "https://docs.mql4.com/chart_operations/windowhandle")<br>Returns the system window handle of the specified chart.<br>[ChartFirst](https://www.mql5.com/en/docs/chart_operations/chartfirst), [ChartNext](https://www.mql5.com/en/docs/chart_operations/chartnext), [ChartSymbol](https://www.mql5.com/en/docs/chart_operations/chartsymbol), [ChartPeriod](https://www.mql5.com/en/docs/chart_operations/chartperiod) |
| ```<br>bool WindowIsVisible(int index)<br>``` | ```<br>bool ChartGetInteger(0,CHART_WINDOW_IS_VISIBLE,index)<br>``` | [WindowIsVisible](https://docs.mql4.com/chart_operations/windowisvisible "https://docs.mql4.com/chart_operations/windowisvisible")<br>Returns TRUE if the chart subwindow is visible, otherwise returns FALSE.<br>[ChartGetInteger](https://www.mql5.com/en/docs/chart_operations/chartgetinteger) |
| ```<br>int WindowOnDropped()<br>``` | ```<br>int ChartWindowOnDropped()<br>``` | [WindowOnDropped](https://docs.mql4.com/chart_operations/windowondropped "https://docs.mql4.com/chart_operations/windowondropped")<br>Returns window index where expert, custom indicator or script was dropped.<br>[ChartWindowOnDropped](https://www.mql5.com/en/docs/chart_operations/chartwindowondropped) |
| ```<br>double WindowPriceMax(int index=0)<br>``` | ```<br>double ChartGetDouble(0,CHART_PRICE_MAX,index)<br>``` | [WindowPriceMax](https://docs.mql4.com/chart_operations/windowpricemax "https://docs.mql4.com/chart_operations/windowpricemax")<br>Returns maximal value of the vertical scale of the specified subwindow of the current chart (0-main chart window, the indicators' subwindows are numbered starting from 1).<br>[ChartGetDouble](https://www.mql5.com/en/docs/chart_operations/chartgetdouble) |
| ```<br>double WindowPriceMin(int index=0)<br>``` | ```<br>double ChartGetDouble(0,CHART_PRICE_MIN,index)<br>``` | [WindowPriceMin](https://docs.mql4.com/chart_operations/windowpricemin "https://docs.mql4.com/chart_operations/windowpricemin")<br>Returns minimal value of the vertical scale of the specified subwindow of the current chart (0-main chart window, the indicators' subwindows are numbered starting from 1).<br>[ChartGetDouble](https://www.mql5.com/en/docs/chart_operations/chartgetdouble) |
| ```<br>double WindowPriceOnDropped()<br>``` | ```<br>double ChartPriceOnDropped()<br>``` | [WindowPriceOnDropped](https://docs.mql4.com/chart_operations/windowpriceondropped "https://docs.mql4.com/chart_operations/windowpriceondropped")<br>Returns the price part of the chart point where expert or script was dropped.<br>[ChartPriceOnDropped](https://www.mql5.com/en/docs/chart_operations/chartpriceondropped) |
| ```<br>void WindowRedraw()<br>``` | ```<br>void ChartRedraw(0)<br>``` | [WindowRedraw](https://docs.mql4.com/chart_operations/windowredraw "https://docs.mql4.com/chart_operations/windowredraw")<br>Redraws the current chart forcedly.<br>[ChartRedraw](https://www.mql5.com/en/docs/chart_operations/chartredraw) |
| ```<br>bool WindowScreenShot(string filename,<br>                      int size_x,<br>                      int size_y,<br>                      int start_bar=-1,<br>                      int chart_scale=-1,<br>                      int chart_mode=-1)<br>``` | ```<br>bool WindowScreenShotMQL4(string filename,<br>                          int size_x,<br>                          int size_y,<br>                          int start_bar=-1,<br>                          int chart_scale=-1,<br>                          int chart_mode=-1)<br>  {<br>   if(chart_scale>0 && chart_scale<=5)<br>      ChartSetInteger(0,CHART_SCALE,chart_scale);<br>   switch(chart_mode)<br>     {<br>      case 0: ChartSetInteger(0,CHART_MODE,CHART_BARS);<br>      case 1: ChartSetInteger(0,CHART_MODE,CHART_CANDLES);<br>      case 2: ChartSetInteger(0,CHART_MODE,CHART_LINE);<br>     }<br>   if(start_bar<0)<br>      return(ChartScreenShot(0,filename,size_x,size_y,ALIGN_RIGHT));<br>   else<br>      return(ChartScreenShot(0,filename,size_x,size_y,ALIGN_LEFT));<br>  }<br>``` | [WindowScreenShot](https://docs.mql4.com/chart_operations/windowscreenshot "https://docs.mql4.com/chart_operations/windowscreenshot")<br>Saves current chart screen shot as a GIF file.<br>[ChartSetInteger](https://www.mql5.com/en/docs/chart_operations/chartsetinteger), [ChartScreenShot](https://www.mql5.com/en/docs/chart_operations/chartscreenshot) |
| ```<br>datetime WindowTimeOnDropped()<br>``` | ```<br>datetime ChartTimeOnDropped()<br>``` | [WindowTimeOnDropped](https://docs.mql4.com/chart_operations/windowtimeondropped "https://docs.mql4.com/chart_operations/windowtimeondropped")<br>Returns the time part of the chart point where expert or script was dropped.<br>[ChartTimeOnDropped](https://www.mql5.com/en/docs/chart_operations/charttimeondropped) |
| ```<br>int WindowsTotal()<br>``` | ```<br>int ChartGetInteger(0,CHART_WINDOWS_TOTAL)<br>``` | [WindowsTotal](https://docs.mql4.com/chart_operations/windowstotal "https://docs.mql4.com/chart_operations/windowstotal")<br>Returns count of indicator windows on the chart (including main chart).<br>[ChartGetInteger](https://www.mql5.com/en/docs/chart_operations/chartgetinteger) |
| ```<br>int WindowXOnDropped()<br>``` | ```<br>int ChartXOnDropped()<br>``` | [WindowXOnDropped](https://docs.mql4.com/chart_operations/windowxondropped "https://docs.mql4.com/chart_operations/windowxondropped")<br>Returns the value at X axis in pixels for the chart window client area point at which the expert or script was dropped.<br>[ChartXOnDropped](https://www.mql5.com/en/docs/chart_operations/chartxondropped) |
| ```<br>int WindowYOnDropped()<br>``` | ```<br>int ChartYOnDropped()<br>``` | [WindowYOnDropped](https://docs.mql4.com/chart_operations/windowyondropped "https://docs.mql4.com/chart_operations/windowyondropped")<br>Returns the value at Y axis in pixels for the chart window client area point at which the expert or script was dropped.<br>[ChartYOnDropped](https://www.mql5.com/en/docs/chart_operations/chartyondropped) |

### Conclusion

1. We haven't considered trading functions, because in MQL5 the concept is different, and the original should be used! It's possible to convert them, but the trading logic should be changed. In other words, there is no sense in converting them.

2. The conversion of programs from one language to another is always associated with the loss of functionality and performance. Therefore, use this guide for the quick search for the functions analogues.
3. I have plans to develop the MQL4 emulator, which will allow you to run your MQL4 programs in new MetaTrader 5 client terminal.

Credits: keiji, A. Williams.

Translated from Russian by MetaQuotes Ltd.

Original article: [https://www.mql5.com/ru/articles/81](https://www.mql5.com/ru/articles/81)

**Attached files** \|


[Download ZIP](https://www.mql5.com/en/articles/download/81.zip "Download all attachments in the single ZIP archive")

[initmql4.mqh](https://www.mql5.com/en/articles/download/81/initmql4.mqh "Download initmql4.mqh")(7.5 KB)

**Warning:** All rights to these materials are reserved by MetaQuotes Ltd. Copying or reprinting of these materials in whole or in part is prohibited.

This article was written by a user of the site and reflects their personal views. MetaQuotes Ltd is not responsible for the accuracy of the information presented, nor for any consequences resulting from the use of the solutions, strategies or recommendations described.

#### Other articles by this author

- [Developing multi-module Expert Advisors](https://www.mql5.com/en/articles/3133)
- [3D Modeling in MQL5](https://www.mql5.com/en/articles/2828)
- [Statistical distributions in the form of histograms without indicator buffers and arrays](https://www.mql5.com/en/articles/2714)
- [The ZigZag Indicator: Fresh Approach and New Solutions](https://www.mql5.com/en/articles/646)
- [Calculation of Integral Characteristics of Indicator Emissions](https://www.mql5.com/en/articles/610)
- [Testing Performance of Moving Averages Calculation in MQL5](https://www.mql5.com/en/articles/106)

**Last comments \|**
**[Go to discussion](https://www.mql5.com/en/forum/994)**
(123)


![Andrey Kaunov](https://c.mql5.com/avatar/2020/2/5E44FD1A-A12F.JPG)

**[Andrey Kaunov](https://www.mql5.com/en/users/andres74)**
\|
30 Aug 2022 at 11:32

There is incorrect information in section 19. The function

```
void HideTestIndicators(bool hide)
```

has an [analogue in MQL5](https://www.mql5.com/en/docs/common/testerhideindicators)

```
void TesterHideIndicators(bool hide)
```

![Aldo Marco Ronchese](https://c.mql5.com/avatar/2025/1/6779d872-abf0.jpg)

**[Aldo Marco Ronchese](https://www.mql5.com/en/users/aldo1003)**
\|
22 Sep 2023 at 22:00

Hi Guys , thanks a stack for the great work.

I was having an issue getting fractals to work when converting from MT4 .. this helps by returning 0 instead of [EMPTY\_VALUE](https://www.mql5.com/en/docs/constants/namedconstants/otherconstants "MQL5 documentation: Other Constants")  .. hope this is the right place to post thanks

```
double iFractals4(string symbol,
                     int tf,
                     int mode,
                     int shift)
  {
   ENUM_TIMEFRAMES timeframe=TFMigrate(tf);
   int handle=iFractals(symbol,timeframe);
   if(handle<0)
     {
      Print("The iFractals object is not created: Error",GetLastError());
      return(-1);
     }
   else
   {
   double buffer=CopyBufferMQL4(handle,mode-1,shift);
      if (buffer!=EMPTY_VALUE) return(CopyBufferMQL4(handle,mode-1,shift));
      else return(0);
      }
  }
```

![billz_billz](https://c.mql5.com/avatar/avatar_na2.png)

**[billz\_billz](https://www.mql5.com/en/users/billz_billz)**
\|
8 Oct 2023 at 17:11

I am benefited a lot from this great guide. Here is my little improvement on function to share.

```
double iMAOnArrayMQL4(double &array[],
                      int total,
                      int period,
                      int ma_shift,
                      int ma_method,
                      int shift)
  {
   double buf[],arr[];
   if(total==0) total=ArraySize(array);
   if(total>0 && total<=period) return(0);
   if(shift>total-period-ma_shift) return(0);
   switch(ma_method)
     {
      case MODE_SMA :
        {
         total=ArrayCopy(arr,array,0,shift+ma_shift,period);
         if(ArrayResize(buf,total)<0) return(0);
         double sum=0;
         int    i,pos=total-1;
         for(i=1;i<period;i++,pos--)
            sum+=arr[pos];
         while(pos>=0)
           {
            sum+=arr[pos];
            buf[pos]=sum/period;
            sum-=arr[pos+period-1];
            pos--;
           }
         return(buf[0]);
        }
      case MODE_EMA :
        {
         if(ArrayResize(buf,total)<0) return(0);
         double pr=2.0/(period+1);
         int    pos=total-2;
         while(pos>=0)
           {
            if(pos==total-2) buf[pos+1]=array[pos+1];
            buf[pos]=array[pos]*pr+buf[pos+1]*(1-pr);
            pos--;

	    // optimization
            if(pos < (shift+ma_shift))
               break;
           }
         return(buf[shift+ma_shift]);
        }
      case MODE_SMMA :
        {
         if(ArrayResize(buf,total)<0) return(0);
         double sum=0;
         int    i,k,pos;
         pos=total-period;
         while(pos>=0)
           {
            if(pos==total-period)
              {
               for(i=0,k=pos;i<period;i++,k++)
                 {
                  sum+=array[k];
                  buf[k]=0;
                 }
              }
            else sum=buf[pos+1]*(period-1)+array[pos];
            buf[pos]=sum/period;
            pos--;

            // optimization
            if(pos < (shift+ma_shift))
               break;
           }
         return(buf[shift+ma_shift]);
        }
      case MODE_LWMA :
        {
         if(ArrayResize(buf,total)<0) return(0);
         double sum=0.0,lsum=0.0;
         double price;
         int    i,weight=0,pos=total-1;
         for(i=1;i<=period;i++,pos--)
           {
            price=array[pos];
            sum+=price*i;
            lsum+=price;
            weight+=i;
           }
         pos++;
         i=pos+period;
         while(pos>=0)
           {
            buf[pos]=sum/weight;
            if(pos==0) break;
            pos--;
            i--;
            price=array[pos];
            sum=sum-lsum+price*period;
            lsum-=array[i];
            lsum+=price;

            // optimization
            if(pos < (shift+ma_shift))
               break;
           }
         return(buf[shift+ma_shift]);
        }
      default: return(0);
     }
   return(0);
  }
```

My optimization removes unnecessary calculation.

![Xing Shun Li](https://c.mql5.com/avatar/avatar_na2.png)

**[Xing Shun Li](https://www.mql5.com/en/users/sunshinetea)**
\|
24 Apr 2025 at 11:39

**MetaQuotes:**

New article [Migrating from MQL4 to MQL5](https://www.mql5.com/en/articles/81) has been published:

Author: [Sergey Pavlov](https://www.mql5.com/en/users/DC2008 "DC2008")

icustom is the fatal flaw of conversion.Uncertain parameters are a nightmare

![zoudong](https://c.mql5.com/avatar/avatar_na2.png)

**[zoudong](https://www.mql5.com/en/users/zoudong)**
\|
6 Jun 2025 at 07:05

pretty good


![Practical Application Of Databases For Markets Analysis](https://c.mql5.com/2/0/dar.png)[Practical Application Of Databases For Markets Analysis](https://www.mql5.com/en/articles/69)

Working with data has become the main task for modern software - both for standalone and network applications. To solve this problem a specialized software were created. These are Database Management Systems (DBMS), that can structure, systematize and organize data for their computer storage and processing. As for trading, the most of analysts don't use databases in their work. But there are tasks, where such a solution would have to be handy. This article provides an example of indicators, that can save and load data from databases both with client-server and file-server architectures.

![A Virtual Order Manager to track orders within the position-centric MetaTrader 5 environment](https://c.mql5.com/2/0/virtual__1.png)[A Virtual Order Manager to track orders within the position-centric MetaTrader 5 environment](https://www.mql5.com/en/articles/88)

This class library can be added to an MetaTrader 5 Expert Advisor to enable it to be written with an order-centric approach broadly similar to MetaTrader 4, in comparison to the position-based approach of MetaTrader 5. It does this by keeping track of virtual orders at the MetaTrader 5 client terminal, while maintaining a protective broker stop for each position for disaster protection.

![Creating Active Control Panels in MQL5 for Trading](https://c.mql5.com/2/0/panel__2.png)[Creating Active Control Panels in MQL5 for Trading](https://www.mql5.com/en/articles/62)

The article covers the problem of development of active control panels in MQL5. Interface elements are managed by the event handling mechanism. Besides, the option of a flexible setup of control elements properties is available. The active control panel allows working with positions, as well setting, modifying and deleting market and pending orders.

![Creating an Indicator with Graphical Control Options](https://c.mql5.com/2/0/macd__1.png)[Creating an Indicator with Graphical Control Options](https://www.mql5.com/en/articles/42)

Those who are familiar with market sentiments, know the MACD indicator (its full name is Moving Average Convergence/Divergence) - the powerful tool for analyzing the price movement, used by traders from the very first moments of appearance of the computer analysis methods. In this article we'll consider possible modifications of MACD and implement them in one indicator with the possibility to graphically switch between the modifications.

[Best articles and CodeBase updates in MQL5.community channelsFollow us to ensure you never miss out on important updates![](https://www.mql5.com/ff/sh/n9yf51p2srwzfqh5z2/02.png)](https://www.mql5.com/ff/go?link=https://www.mql5.com/en/forum/455636%3Futm_source=www.mql5.com%26utm_medium=display%26utm_content=follow.channel%26utm_campaign=AAA380.mql5.socials&a=dgazvhktsxqakdvarucjbvmvzenwlyje&s=98a038fe082e458df8c4a1d8e116e3a6646fd5517f06e48b2356b7ee005817d6&uid=&ref=https://www.mql5.com/en/articles/81&id=wdausxxqrpvhekbwjrjlhqjghyhesrqqau&fz_uniq=5071782281531567702)

This website uses cookies. Learn more about our [Cookies Policy](https://www.mql5.com/en/about/cookies).

![close](https://c.mql5.com/i/close.png)

![MQL5 - Language of trade strategies built-in the MetaTrader 5 client terminal](https://c.mql5.com/i/registerlandings/logo-2.png)

You are missing trading opportunities:

- Free trading apps
- Over 8,000 signals for copying
- Economic news for exploring financial markets

RegistrationLog in

latin characters without spaces

a password will be sent to this email

An error occurred


- [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup&amp;reg=1)

You agree to [website policy](https://www.mql5.com/en/about/privacy) and [terms of use](https://www.mql5.com/en/about/terms)

If you do not have an account, please [register](https://www.mql5.com/en/auth_register)

Allow the use of cookies to log in to the MQL5.com website.

Please enable the necessary setting in your browser, otherwise you will not be able to log in.

[Forgot your login/password?](https://www.mql5.com/en/auth_forgotten?return=popup)

- [Log in With Google](https://www.mql5.com/en/auth_oauth2?provider=Google&amp;return=popup)